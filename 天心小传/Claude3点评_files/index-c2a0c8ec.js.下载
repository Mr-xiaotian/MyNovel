import{A as Nt,p as Xe,n as M,a as et,j as e,I as Lt,b as Mt,k as tt,g as At,M as Pt,m as Tt,c as St,r as g,d as It,u as ce,L as st,e as Re,E as _t,f as $t,h as I,Q as Dt,i as qt,l as Et,D as Ut,P as Rt,o as Vt,q as Ot,s as Ge,t as He,v as Ft,w as Bt,x as Gt,y as Ht,R as zt,__tla as __tla_0}from"./vendor-43d717c0.js";let var_f1342fdd_1200_5a08_82b0_ac9c4cb1d69f;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})()]).then(async()=>{var Ct=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var br=Ct((Mr,yt)=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();const rt="64784d117d4675053e6bf8ad",be=new Nt({appId:rt}),Wt=window.Tesseract.createWorker;Xe.GlobalWorkerOptions.workerSrc="/static/pdf.worker.min.js";const Zt=t=>new Promise(s=>{if(t&&t.type.match("image.*")){const r=new FileReader;r.onload=function(n){const a=new Image;a.onload=function(){const l=a.width,i=a.height;s({width:l,height:i})},a.src=n.target.result},r.readAsDataURL(t)}else s({width:0,height:0})}),at=async t=>new Promise(s=>{t.toBlob(function(r){s(r)},"image/png")}),Yt=async t=>new Promise((s,r)=>{const n=new FileReader;n.readAsArrayBuffer(t),n.onload=function(){const a=n.result,l=new Uint8Array(a);s(l)},n.onerror=()=>{const a=n.result;r(a)}}),Qt=async t=>{const s=t.getViewport({scale:1}),r=document.createElement("canvas"),n=r.getContext("2d");let a=s.width,l=s.height;r.width=s.width,r.height=s.height,await t.render({canvasContext:n,viewport:s}).promise;const i=r.toDataURL(),o=await at(r),d=a/l;return{url:i,imageRatio:d,blob:o}},Kt=async(t,{onCover:s,onPage:r})=>{if(t.type!=="application/pdf")return{error:"请选择 PDF 文件",canExtractText:!1};const n=await Yt(t),a=await Xe.getDocument(n).promise,l=a.numPages;let i=[],o;r({page:0,totalPage:l,cover:o});for(let c=1;c<=l;c++){let u="";const p=await a.getPage(c),{items:j}=await p.getTextContent();c===1&&(o=await Qt(p),s(o)),j.forEach(C=>{u+=C?.str}),i.push(u),r({page:c,totalPage:l,cover:o})}const d=!i.every(c=>!c);if(!d&&l<60){M.success("正在尝试解析影印版 PDF，可能花费时间较长，请耐心等待"),i=[],r({page:1,totalPage:l,cover:o});const c=await Wt("chi_sim+eng",1);for(let u=1;u<=l;u++){const p=await a.getPage(u),j=p.getViewport({scale:1}),C=document.createElement("canvas"),b=C.getContext("2d");C.width=j.width,C.height=j.height,await p.render({canvasContext:b,viewport:j}).promise;const v=await at(C),{data:{text:H}}=await c.recognize(v);r({page:u,totalPage:l,cover:o}),console.log(H.replace(/\s([\u4e00-\u9fa5])/g,"$1").replace(/\s(\。|\.|\，|；|;)/g,"$1")),i.push(H.replace(/\s([\u4e00-\u9fa5])/g,"$1").replace(/\s(\。|\.|\，|；|;)/g,"$1"))}c.terminate()}return console.log(i,d),{pages:i,cover:o,canExtractText:d}},ze=(t,s=2e3)=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=l=>{const i=new Image;i.src=l.target.result,i.onload=()=>{let o=document.createElement("canvas"),d=i.width,c=i.height;d>c?d>s&&(c=Math.round(c*s/d),d=s):c>s&&(d=Math.round(d*s/c),c=s),o.width=d,o.height=c,o.getContext("2d").drawImage(i,0,0,d,c),o.toBlob(p=>{let j=new File([p],t.name,{type:"image/jpeg",lastModified:Date.now()});r(j)},"image/jpeg",.7)}},a.onerror=l=>{console.error(l),n(l)}}),nt="https://api.chatanything.ai",Jt=new URLSearchParams(location.search),Xt=Jt.get("k"),D=(t,s,r={})=>{const a=/http/.test(t||"")?t:nt+t;return new Promise((l,i)=>{et.post(a,s,{withCredentials:!1,headers:{withCredentials:!1,"Content-Type":"application/json",Authorization:`Bearer ${Xt||localStorage.getItem("_authing_token")||""}`,"Access-Control-Max-Age":600},...r}).then(o=>{const d=o.data;l(d)}).catch(o=>{i(o)})})},Ce=async(t,s={})=>{const r=`${new Date().toISOString()}-${t.name}`,{url:n}=await D("/common/presignedUrl",{name:r}),{width:a,height:l}=await Zt(t);return await et({method:"PUT",url:n,data:t,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:i=>{const o=Math.round(i.loaded*100/i.total);s.onProgress&&s.onProgress({loaded:i.loaded,total:i.total,percent:o})}}),{name:t.name,mime:t.type,size:t.size,url:`https://static.chatanything.ai/static/${r}`,width:a,height:l}},es={user:{id:"",email:"",photo:""},profile:{id:"",membershipExpiredTime:"",membershipType:""},profileFetched:!1,isPlus:!1},ts={actions:{setUser:async t=>({user:t}),refreshProfile:async()=>{const s=(await D("/account/profile"))?.user;return{profile:s,isPlus:s?.membershipType==="Plus",profileFetched:!0}}},state:es},lt={GPT3_5:"GPT-3.5",GPT4:"GPT-4",CLAUDE_3:"Claude 3",DALL_E_3:"Dall-E 3"},ss={GPT3_5:"适合日常任务",GPT4:"适合复杂任务",CLAUDE_3:"长上下文感知",DALL_E_3:""},ie={GPT3_5:"rgb(25, 195, 125)",GPT4:"black",CLAUDE_3:"rgb(216, 120, 86)",DALL_E_3:"linear-gradient(45deg, #a855f7, #ec4899)"},rs={GPT3_5:null,GPT4:e.jsx(Lt,{size:"large"}),CLAUDE_3:e.jsx(Mt,{size:"large"}),DALL_E_3:null},as={GPT3_5:"",GPT4:"image/*",CLAUDE_3:".pdf",DALL_E_3:""},ns={GPT3_5:"发送对话消息",GPT4:"发送对话消息",CLAUDE_3:"发送对话消息",DALL_E_3:"输入生成图片的描述"},ls={GPT3_5:"/chat/completions",GPT4:"/chat/completions-v4",CLAUDE_3:"/chat/completions-claude-3",DALL_E_3:"/chat/completions-dall-e-3"},ye={GPT3_5:"GPT3_5",GPT4:"GPT4",CLAUDE_3:"CLAUDE_3",DALL_E_3:"DALL_E_3"},os=[ye.GPT3_5,ye.GPT4,ye.CLAUDE_3],ot={GPT3_5:!1,GPT4:!0,CLAUDE_3:!0,DALL_E_3:!0},is=({modelType:t})=>t==="CLAUDE_3"?e.jsx("div",{className:"w-[30px]",children:e.jsx("div",{className:"relative rounded-full h-[30px] w-[30px] text-white flex items-center justify-center",children:e.jsx("img",{className:"w-full rounded-full",src:"/static/claude-3.jpg",alt:"claude 3"})})}):e.jsx("div",{className:"w-[30px]",children:e.jsx("div",{className:"relative p-1 rounded-full h-[30px] w-[30px] text-white flex items-center justify-center",style:{background:ie[t]},children:e.jsxs("svg",{width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"1.5",className:"h-6 w-6",role:"img",children:[e.jsx("title",{children:"ChatGPT"}),e.jsx("text",{x:"-9999",y:"-9999",children:"ChatGPT"}),e.jsx("path",{d:"M37.5324 16.8707C37.9808 15.5241 38.1363 14.0974 37.9886 12.6859C37.8409 11.2744 37.3934 9.91076 36.676 8.68622C35.6126 6.83404 33.9882 5.3676 32.0373 4.4985C30.0864 3.62941 27.9098 3.40259 25.8215 3.85078C24.8796 2.7893 23.7219 1.94125 22.4257 1.36341C21.1295 0.785575 19.7249 0.491269 18.3058 0.500197C16.1708 0.495044 14.0893 1.16803 12.3614 2.42214C10.6335 3.67624 9.34853 5.44666 8.6917 7.47815C7.30085 7.76286 5.98686 8.3414 4.8377 9.17505C3.68854 10.0087 2.73073 11.0782 2.02839 12.312C0.956464 14.1591 0.498905 16.2988 0.721698 18.4228C0.944492 20.5467 1.83612 22.5449 3.268 24.1293C2.81966 25.4759 2.66413 26.9026 2.81182 28.3141C2.95951 29.7256 3.40701 31.0892 4.12437 32.3138C5.18791 34.1659 6.8123 35.6322 8.76321 36.5013C10.7141 37.3704 12.8907 37.5973 14.9789 37.1492C15.9208 38.2107 17.0786 39.0587 18.3747 39.6366C19.6709 40.2144 21.0755 40.5087 22.4946 40.4998C24.6307 40.5054 26.7133 39.8321 28.4418 38.5772C30.1704 37.3223 31.4556 35.5506 32.1119 33.5179C33.5027 33.2332 34.8167 32.6547 35.9659 31.821C37.115 30.9874 38.0728 29.9178 38.7752 28.684C39.8458 26.8371 40.3023 24.6979 40.0789 22.5748C39.8556 20.4517 38.9639 18.4544 37.5324 16.8707ZM22.4978 37.8849C20.7443 37.8874 19.0459 37.2733 17.6994 36.1501C17.7601 36.117 17.8666 36.0586 17.936 36.0161L25.9004 31.4156C26.1003 31.3019 26.2663 31.137 26.3813 30.9378C26.4964 30.7386 26.5563 30.5124 26.5549 30.2825V19.0542L29.9213 20.998C29.9389 21.0068 29.9541 21.0198 29.9656 21.0359C29.977 21.052 29.9842 21.0707 29.9867 21.0902V30.3889C29.9842 32.375 29.1946 34.2791 27.7909 35.6841C26.3872 37.0892 24.4838 37.8806 22.4978 37.8849ZM6.39227 31.0064C5.51397 29.4888 5.19742 27.7107 5.49804 25.9832C5.55718 26.0187 5.66048 26.0818 5.73461 26.1244L13.699 30.7248C13.8975 30.8408 14.1233 30.902 14.3532 30.902C14.583 30.902 14.8088 30.8408 15.0073 30.7248L24.731 25.1103V28.9979C24.7321 29.0177 24.7283 29.0376 24.7199 29.0556C24.7115 29.0736 24.6988 29.0893 24.6829 29.1012L16.6317 33.7497C14.9096 34.7416 12.8643 35.0097 10.9447 34.4954C9.02506 33.9811 7.38785 32.7263 6.39227 31.0064ZM4.29707 13.6194C5.17156 12.0998 6.55279 10.9364 8.19885 10.3327C8.19885 10.4013 8.19491 10.5228 8.19491 10.6071V19.808C8.19351 20.0378 8.25334 20.2638 8.36823 20.4629C8.48312 20.6619 8.64893 20.8267 8.84863 20.9404L18.5723 26.5542L15.206 28.4979C15.1894 28.5089 15.1703 28.5155 15.1505 28.5173C15.1307 28.5191 15.1107 28.516 15.0924 28.5082L7.04046 23.8557C5.32135 22.8601 4.06716 21.2235 3.55289 19.3046C3.03862 17.3858 3.30624 15.3413 4.29707 13.6194ZM31.955 20.0556L22.2312 14.4411L25.5976 12.4981C25.6142 12.4872 25.6333 12.4805 25.6531 12.4787C25.6729 12.4769 25.6928 12.4801 25.7111 12.4879L33.7631 17.1364C34.9967 17.849 36.0017 18.8982 36.6606 20.1613C37.3194 21.4244 37.6047 22.849 37.4832 24.2684C37.3617 25.6878 36.8382 27.0432 35.9743 28.1759C35.1103 29.3086 33.9415 30.1717 32.6047 30.6641C32.6047 30.5947 32.6047 30.4733 32.6047 30.3889V21.188C32.6066 20.9586 32.5474 20.7328 32.4332 20.5338C32.319 20.3348 32.154 20.1698 31.955 20.0556ZM35.3055 15.0128C35.2464 14.9765 35.1431 14.9142 35.069 14.8717L27.1045 10.2712C26.906 10.1554 26.6803 10.0943 26.4504 10.0943C26.2206 10.0943 25.9948 10.1554 25.7963 10.2712L16.0726 15.8858V11.9982C16.0715 11.9783 16.0753 11.9585 16.0837 11.9405C16.0921 11.9225 16.1048 11.9068 16.1207 11.8949L24.1719 7.25025C25.4053 6.53903 26.8158 6.19376 28.2383 6.25482C29.6608 6.31589 31.0364 6.78077 32.2044 7.59508C33.3723 8.40939 34.2842 9.53945 34.8334 10.8531C35.3826 12.1667 35.5464 13.6095 35.3055 15.0128ZM14.2424 21.9419L10.8752 19.9981C10.8576 19.9893 10.8423 19.9763 10.8309 19.9602C10.8195 19.9441 10.8122 19.9254 10.8098 19.9058V10.6071C10.8107 9.18295 11.2173 7.78848 11.9819 6.58696C12.7466 5.38544 13.8377 4.42659 15.1275 3.82264C16.4173 3.21869 17.8524 2.99464 19.2649 3.1767C20.6775 3.35876 22.0089 3.93941 23.1034 4.85067C23.0427 4.88379 22.937 4.94215 22.8668 4.98473L14.9024 9.58517C14.7025 9.69878 14.5366 9.86356 14.4215 10.0626C14.3065 10.2616 14.2466 10.4877 14.2479 10.7175L14.2424 21.9419ZM16.071 17.9991L20.4018 15.4978L24.7325 17.9975V22.9985L20.4018 25.4983L16.071 22.9985V17.9991Z",fill:"currentColor"})]})})}),it=({modelType:t})=>t==="CLAUDE_3"?e.jsx("div",{className:"mb-3 h-[72px] w-[72px]",children:e.jsx("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full text-black",children:e.jsx("img",{className:"w-full rounded-full",src:"/static/claude-3.jpg",alt:"claude 3"})})}):e.jsx("div",{className:"mb-3 h-[72px] w-[72px]",children:e.jsx("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full text-black",style:{background:ie[t]},children:e.jsx("svg",{width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-2/3 w-2/3",role:"img",children:e.jsx("path",{d:"M37.5324 16.8707C37.9808 15.5241 38.1363 14.0974 37.9886 12.6859C37.8409 11.2744 37.3934 9.91076 36.676 8.68622C35.6126 6.83404 33.9882 5.3676 32.0373 4.4985C30.0864 3.62941 27.9098 3.40259 25.8215 3.85078C24.8796 2.7893 23.7219 1.94125 22.4257 1.36341C21.1295 0.785575 19.7249 0.491269 18.3058 0.500197C16.1708 0.495044 14.0893 1.16803 12.3614 2.42214C10.6335 3.67624 9.34853 5.44666 8.6917 7.47815C7.30085 7.76286 5.98686 8.3414 4.8377 9.17505C3.68854 10.0087 2.73073 11.0782 2.02839 12.312C0.956464 14.1591 0.498905 16.2988 0.721698 18.4228C0.944492 20.5467 1.83612 22.5449 3.268 24.1293C2.81966 25.4759 2.66413 26.9026 2.81182 28.3141C2.95951 29.7256 3.40701 31.0892 4.12437 32.3138C5.18791 34.1659 6.8123 35.6322 8.76321 36.5013C10.7141 37.3704 12.8907 37.5973 14.9789 37.1492C15.9208 38.2107 17.0786 39.0587 18.3747 39.6366C19.6709 40.2144 21.0755 40.5087 22.4946 40.4998C24.6307 40.5054 26.7133 39.8321 28.4418 38.5772C30.1704 37.3223 31.4556 35.5506 32.1119 33.5179C33.5027 33.2332 34.8167 32.6547 35.9659 31.821C37.115 30.9874 38.0728 29.9178 38.7752 28.684C39.8458 26.8371 40.3023 24.6979 40.0789 22.5748C39.8556 20.4517 38.9639 18.4544 37.5324 16.8707ZM22.4978 37.8849C20.7443 37.8874 19.0459 37.2733 17.6994 36.1501C17.7601 36.117 17.8666 36.0586 17.936 36.0161L25.9004 31.4156C26.1003 31.3019 26.2663 31.137 26.3813 30.9378C26.4964 30.7386 26.5563 30.5124 26.5549 30.2825V19.0542L29.9213 20.998C29.9389 21.0068 29.9541 21.0198 29.9656 21.0359C29.977 21.052 29.9842 21.0707 29.9867 21.0902V30.3889C29.9842 32.375 29.1946 34.2791 27.7909 35.6841C26.3872 37.0892 24.4838 37.8806 22.4978 37.8849ZM6.39227 31.0064C5.51397 29.4888 5.19742 27.7107 5.49804 25.9832C5.55718 26.0187 5.66048 26.0818 5.73461 26.1244L13.699 30.7248C13.8975 30.8408 14.1233 30.902 14.3532 30.902C14.583 30.902 14.8088 30.8408 15.0073 30.7248L24.731 25.1103V28.9979C24.7321 29.0177 24.7283 29.0376 24.7199 29.0556C24.7115 29.0736 24.6988 29.0893 24.6829 29.1012L16.6317 33.7497C14.9096 34.7416 12.8643 35.0097 10.9447 34.4954C9.02506 33.9811 7.38785 32.7263 6.39227 31.0064ZM4.29707 13.6194C5.17156 12.0998 6.55279 10.9364 8.19885 10.3327C8.19885 10.4013 8.19491 10.5228 8.19491 10.6071V19.808C8.19351 20.0378 8.25334 20.2638 8.36823 20.4629C8.48312 20.6619 8.64893 20.8267 8.84863 20.9404L18.5723 26.5542L15.206 28.4979C15.1894 28.5089 15.1703 28.5155 15.1505 28.5173C15.1307 28.5191 15.1107 28.516 15.0924 28.5082L7.04046 23.8557C5.32135 22.8601 4.06716 21.2235 3.55289 19.3046C3.03862 17.3858 3.30624 15.3413 4.29707 13.6194ZM31.955 20.0556L22.2312 14.4411L25.5976 12.4981C25.6142 12.4872 25.6333 12.4805 25.6531 12.4787C25.6729 12.4769 25.6928 12.4801 25.7111 12.4879L33.7631 17.1364C34.9967 17.849 36.0017 18.8982 36.6606 20.1613C37.3194 21.4244 37.6047 22.849 37.4832 24.2684C37.3617 25.6878 36.8382 27.0432 35.9743 28.1759C35.1103 29.3086 33.9415 30.1717 32.6047 30.6641C32.6047 30.5947 32.6047 30.4733 32.6047 30.3889V21.188C32.6066 20.9586 32.5474 20.7328 32.4332 20.5338C32.319 20.3348 32.154 20.1698 31.955 20.0556ZM35.3055 15.0128C35.2464 14.9765 35.1431 14.9142 35.069 14.8717L27.1045 10.2712C26.906 10.1554 26.6803 10.0943 26.4504 10.0943C26.2206 10.0943 25.9948 10.1554 25.7963 10.2712L16.0726 15.8858V11.9982C16.0715 11.9783 16.0753 11.9585 16.0837 11.9405C16.0921 11.9225 16.1048 11.9068 16.1207 11.8949L24.1719 7.25025C25.4053 6.53903 26.8158 6.19376 28.2383 6.25482C29.6608 6.31589 31.0364 6.78077 32.2044 7.59508C33.3723 8.40939 34.2842 9.53945 34.8334 10.8531C35.3826 12.1667 35.5464 13.6095 35.3055 15.0128ZM14.2424 21.9419L10.8752 19.9981C10.8576 19.9893 10.8423 19.9763 10.8309 19.9602C10.8195 19.9441 10.8122 19.9254 10.8098 19.9058V10.6071C10.8107 9.18295 11.2173 7.78848 11.9819 6.58696C12.7466 5.38544 13.8377 4.42659 15.1275 3.82264C16.4173 3.21869 17.8524 2.99464 19.2649 3.1767C20.6775 3.35876 22.0089 3.93941 23.1034 4.85067C23.0427 4.88379 22.937 4.94215 22.8668 4.98473L14.9024 9.58517C14.7025 9.69878 14.5366 9.86356 14.4215 10.0626C14.3065 10.2616 14.2466 10.4877 14.2479 10.7175L14.2424 21.9419ZM16.071 17.9991L20.4018 15.4978L24.7325 17.9975V22.9985L20.4018 25.4983L16.071 22.9985V17.9991Z",fill:"white"})})})});function ct(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function w(t,s){const r=w.mergeDelimiters(s&&s.delimiters),n=s&&s.outerSpace||!1,a=s&&s.katexOptions||{};a.throwOnError=a.throwOnError||!1,a.macros=a.macros||s&&s.macros,w.katex||(s&&typeof s.engine=="object"?w.katex=s.engine:typeof yt=="object"?w.katex=require("katex"):w.katex={renderToString(){return"No math renderer found."}});for(const l of r.inline)n&&"outerSpace"in l&&(l.outerSpace=!0),t.inline.ruler.before("escape",l.name,w.inline(l)),t.renderer.rules[l.name]=(i,o)=>l.tmpl.replace(/\$1/,w.render(i[o].content,!!l.displayMode,a));for(const l of r.block)t.block.ruler.before("fence",l.name,w.block(l)),t.renderer.rules[l.name]=(i,o)=>l.tmpl.replace(/\$2/,ct(i[o].info)).replace(/\$1/,w.render(i[o].content,!0,a))}w.mergeDelimiters=function(t){const s=Array.isArray(t)?t:typeof t=="string"?[t]:["dollars"],r={inline:[],block:[]};for(const n of s)n in w.rules&&(r.inline.push(...w.rules[n].inline),r.block.push(...w.rules[n].block));return r};w.inline=t=>function(s,r){const n=s.pos,a=s.src,i=a.startsWith(t.tag,t.rex.lastIndex=n)&&(!t.pre||t.pre(a,t.outerSpace,n))&&t.rex.exec(a),o=!!i&&n<t.rex.lastIndex&&(!t.post||t.post(a,t.outerSpace,t.rex.lastIndex-1));if(o){if(!r){const d=s.push(t.name,"math",0);d.content=i[1],d.markup=t.tag}s.pos=t.rex.lastIndex}return o};w.block=t=>function(r,n,a,l){const i=r.bMarks[n]+r.tShift[n],o=r.src,c=o.startsWith(t.tag,t.rex.lastIndex=i)&&(!t.pre||t.pre(o,!1,i))&&t.rex.exec(o),u=!!c&&i<t.rex.lastIndex&&(!t.post||t.post(o,!1,t.rex.lastIndex-1));if(u&&!l){const p=t.rex.lastIndex-1;let j;for(j=n;j<a&&!(p>=r.bMarks[j]+r.tShift[j]&&p<=r.eMarks[j]);j++);const C=r.lineMax,b=r.parentType;r.lineMax=j,r.parentType="math",b==="blockquote"&&(c[1]=c[1].replace(/(\n*?^(?:\s*>)+)/gm,""));let v=r.push(t.name,"math",0);v.block=!0,v.tag=t.tag,v.markup="",v.content=c[1],v.info=c[c.length-1],v.map=[n,j+1],r.parentType=b,r.lineMax=C,r.line=j+1}return u};w.render=function(t,s,r){r.displayMode=s;let n;const a=t;try{n=tt.renderToString(t,r)}catch(l){console.log("-> 3",l),n=ct(`${a}`)}return n};w.use=function(t){return w.katex=t,w};w.inlineRuleNames=["math_inline","math_inline_double"];w.blockRuleNames=["math_block","math_block_eqno"];w.$_pre=(t,s,r)=>{const n=r>0?t[r-1].charCodeAt(0):!1;return s?!n||n===32:!n||n!==92&&(n<48||n>57)};w.$_post=(t,s,r)=>{const n=t[r+1]&&t[r+1].charCodeAt(0);return s?!n||n===32||n===46||n===44||n===59:!n||n<48||n>57};w.rules={brackets:{inline:[{name:"math_inline",rex:/\\\((.+?)\\\)/gy,tmpl:"<eq>$1</eq>",tag:"\\("}],block:[{name:"math_block_eqno",rex:/\\\[(((?!\\\]|\\\[)[\s\S])+?)\\\]\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"\\["},{name:"math_block",rex:/\\\[([\s\S]+?)\\\]/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"\\["}]},doxygen:{inline:[{name:"math_inline",rex:/\\f\$(.+?)\\f\$/gy,tmpl:"<eq>$1</eq>",tag:"\\f$"}],block:[{name:"math_block_eqno",rex:/\\f\[([^]+?)\\f\]\s*?\(([^)\s]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"\\f["},{name:"math_block",rex:/\\f\[([^]+?)\\f\]/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"\\f["}]},gitlab:{inline:[{name:"math_inline",rex:/\$`(.+?)`\$/gy,tmpl:"<eq>$1</eq>",tag:"$`"}],block:[{name:"math_block_eqno",rex:/`{3}math\s*([^`]+?)\s*?`{3}\s*\(([^)\r\n]+?)\)/gm,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"```math"},{name:"math_block",rex:/`{3}math\s*([^`]*?)\s*`{3}/gm,tmpl:"<section><eqn>$1</eqn></section>",tag:"```math"}]},julia:{inline:[{name:"math_inline",rex:/`{2}([^`]+?)`{2}/gy,tmpl:"<eq>$1</eq>",tag:"``"},{name:"math_inline",rex:/\$((?:\S?)|(?:\S.*?\S))\$/gy,tmpl:"<eq>$1</eq>",tag:"$",spaceEnclosed:!1,pre:w.$_pre,post:w.$_post}],block:[{name:"math_block_eqno",rex:/`{3}math\s+?([^`]+?)\s+?`{3}\s*?\(([^)$\r\n]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"```math"},{name:"math_block",rex:/`{3}math\s+?([^`]+?)\s+?`{3}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"```math"}]},kramdown:{inline:[{name:"math_inline",rex:/\${2}(.+?)\${2}/gy,tmpl:"<eq>$1</eq>",tag:"$$"}],block:[{name:"math_block_eqno",rex:/\${2}([^$]+?)\${2}\s*?\(([^)\s]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"$$"},{name:"math_block",rex:/\${2}([^$]+?)\${2}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"$$"}]},beg_end:{inline:[],block:[{name:"math_block",rex:/(\\(?:begin)\{([a-z]+)\}[\s\S]+?\\(?:end)\{\2\})/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"\\"}]},dollars:{inline:[{name:"math_inline_double",rex:/\${2}([^$]*?[^\\])\${2}/gy,tmpl:"<section><eqn>$1</eqn></section>",tag:"$$",displayMode:!0,pre:w.$_pre,post:w.$_post},{name:"math_inline",rex:/\$((?:[^\s\\])|(?:\S.*?[^\s\\]))\$/gy,tmpl:"<eq>$1</eq>",tag:"$",outerSpace:!1,pre:w.$_pre,post:w.$_post}],block:[{name:"math_block_eqno",rex:/\${2}([^$]*?[^\\])\${2}\s*?\(([^)\s]+?)\)/gmy,tmpl:'<section class="eqno"><eqn>$1</eqn><span>($2)</span></section>',tag:"$$"},{name:"math_block",rex:/\${2}([^$]*?[^\\])\${2}/gmy,tmpl:"<section><eqn>$1</eqn></section>",tag:"$$"}]}};const Ue="1.2.5",Ve=[{key:"Monthly",label:"按月",originalPrice:"\xa5140/月",currentPrice:"\xa599/月",btnText:"升级版本"},{key:"Quarterly",label:"按季",originalPrice:"\xa5420/季",currentPrice:"\xa5207/季",btnText:"升级版本，每月仅需 69 元"},{key:"Yearly",label:"按年",originalPrice:"\xa51680/年",currentPrice:"\xa5498/年",btnText:"升级版本，每月仅需 41.5 元"}],Ne=Ve.reduce((t,s)=>Object.assign(t,{[s.key]:s}),{}),We=["javascript","c","csharp","css","go","html","java","json","jsx","less","lisp","lua","matlab","objective-c","php","python","r","rust","sql","swift","tsx","typescript","vue","xml","yaml","bash"];let Y=null;const cs=async()=>{if(Y)return Y;const t=await At({themes:["min-light","slack-dark"],langs:We});Y=Pt({highlight:(r,n)=>{const a=n==="cpp"?"cpp":n||"plaintext";try{const l=t.codeToHtml(r,{lang:a==="cpp"?"c":We.includes(a)?a:"bash",themes:{light:"min-light",dark:"slack-dark"}});return`<div class="shiki-code-box relative -my-[0.8571429em] -mx-[1.1428571em]"><div class="absolute right-[12px] top-[12px] text-gray-600"><code class="lang-mark hidden md:inline">${a==="plaintext"?"":a}</code><div class="copy-mark border"><div class="copy-mark-icon"></div></div></div>${l}</div>`}catch{return'<pre><code class="hljs">'+Y.utils.escapeHtml(r)+"</code></pre>"}},html:!0});const s={macros:{"\\RR":"\\mathbb{R}"},throwOnError:!1,strict:!1};return Y.use(w,{engine:tt,delimiters:["dollars","brackets"],katexOptions:s}),Y.use(Tt,{attrs:{target:"_blank",rel:"noopener"}}),Y},ds={sessionId:"",modelType:ye.GPT3_5,sessions:[],loaded:!1,md:null},hs={actions:{refresh:async()=>({sessions:(await D("/session/list")).list,loaded:!0}),setSessionId:t=>({sessionId:t}),setModelType:t=>({modelType:t}),refreshModelType:(t="",{state:s})=>{const{sessions:r,sessionId:n}=s;let a=s.modelType;if(r){const l=r.find(i=>i.id===(t||n));l&&(a=l?.modelType)}return{modelType:a}},setSessions:async t=>({sessions:t}),refreshMd:async()=>({md:await cs()})},state:ds},dt={url:"",text:"",prompt:"",width:1024,height:1024},ht={url:"",pageRatio:1.7},xs={upgradeModalOpen:!1,membershipModalOpen:!1,alipayQRCodeModalUrl:"",wxkfQRCodeModalOpen:!1,announcementModalOpen:!1,imageData:{...dt},docData:{...ht}},ms={actions:{setUpgradeModalOpen:t=>({upgradeModalOpen:t}),setMembershipModalOpen:t=>({membershipModalOpen:t}),setAlipayQRCodeModalUrl:t=>({alipayQRCodeModalUrl:t}),setWxkfQRCodeModalOpen:t=>({wxkfQRCodeModalOpen:t}),setAnnouncementModalOpen:t=>({announcementModalOpen:t}),setImageViewData:t=>({imageData:t}),clearImageViewData:()=>({imageData:{...dt}}),setDocViewData:t=>({docData:t}),clearDocViewData:()=>({docData:{...ht}})},state:xs},us={countdown:!1,timer:{days:"00",hours:"00",minutes:"00",seconds:"00"}},gs={actions:{setCountdown:t=>({countdown:t}),refreshTimer:t=>({timer:t})},state:us},ps={Account:ts,Session:hs,Modal:ms,System:gs},{getInitialState:vr,useStore:m,getState:kr,actions:Cr,subscribe:Nr,unsubscribe:Lr}=St(ps),Le="今天",Me="昨天",Ae="本周",Pe="本月",fs=(t=[])=>{const s={},r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()-r.getDay());return t.forEach(a=>{const l=new Date(a.createTime),i=Math.floor((r.getTime()-l.getTime())/(24*60*60*1e3)),o=Math.floor((n.getTime()-l.getTime())/(24*60*60*1e3));if(i===0){s[Le]=s[Le]||[],s[Le].push(a);return}if(i===1){s[Me]=s[Me]||[],s[Me].push(a);return}if(o<=7){s[Ae]=s[Ae]||[],s[Ae].push(a);return}if(l.getFullYear()===r.getFullYear()&&l.getMonth()===r.getMonth()){s[Pe]=s[Pe]||[],s[Pe].push(a);return}const d=l.toLocaleString("zh-CN",{month:"short"});if(l.getFullYear()===r.getFullYear()){s[d]=s[d]||[],s[d].push(a);return}const c=`${l.getFullYear()}年 ${d}`;s[c]=s[c]||[],s[c].push(a)}),s},ys=t=>{const[s,r]=g.useState(t),n=g.useRef(null),a=l=>{n.current&&!n.current.contains(l.target)&&r(!1)};return g.useEffect(()=>(document.addEventListener("click",a,!0),()=>{document.removeEventListener("click",a,!0)}),[]),{ref:n,isComponentVisible:s,setIsComponentVisible:r}},bs=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),ws=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),js=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),vs=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"h-4 w-4",strokeWidth:"2",children:e.jsx("path",{d:"M.5 1.163A1 1 0 0 1 1.97.28l12.868 6.837a1 1 0 0 1 0 1.766L1.969 15.72A1 1 0 0 1 .5 14.836V10.33a1 1 0 0 1 .816-.983L8.5 8 1.316 6.653A1 1 0 0 1 .5 5.67V1.163Z",fill:"currentColor"})}),ks=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),xt=()=>e.jsx("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Cs=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 flex-shrink-0 text-gray-500",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"19",cy:"12",r:"1"}),e.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),Ns=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Ls=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),je=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Ms=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:[e.jsx("path",{d:"M10.663 6.3872C10.8152 6.29068 11 6.40984 11 6.59007V8C11 8.55229 11.4477 9 12 9C12.5523 9 13 8.55229 13 8V6.59007C13 6.40984 13.1848 6.29068 13.337 6.3872C14.036 6.83047 14.5 7.61105 14.5 8.5C14.5 9.53284 13.8737 10.4194 12.9801 10.8006C12.9932 10.865 13 10.9317 13 11V13C13 13.5523 12.5523 14 12 14C11.4477 14 11 13.5523 11 13V11C11 10.9317 11.0068 10.865 11.0199 10.8006C10.1263 10.4194 9.5 9.53284 9.5 8.5C9.5 7.61105 9.96397 6.83047 10.663 6.3872Z",fill:"currentColor"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 5V19C4 20.6569 5.34315 22 7 22H19C19.3346 22 19.6471 21.8326 19.8325 21.5541C20.0179 21.2755 20.0517 20.9227 19.9225 20.614C19.4458 19.4747 19.4458 18.5253 19.9225 17.386C19.9737 17.2637 20 17.1325 20 17V3C20 2.44772 19.5523 2 19 2H7C5.34315 2 4 3.34315 4 5ZM6 5C6 4.44772 6.44772 4 7 4H18V16H7C6.64936 16 6.31278 16.0602 6 16.1707V5ZM7 18H17.657C17.5343 18.6699 17.5343 19.3301 17.657 20H7C6.44772 20 6 19.5523 6 19C6 18.4477 6.44772 18 7 18Z",fill:"currentColor"})]}),mt=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00633 5.5C6.02321 5.53319 6.07042 5.60366 6.19525 5.70906C6.42458 5.9027 6.81573 6.12215 7.38659 6.32603C8.5196 6.73067 10.1506 7 12 7C13.8494 7 15.4804 6.73067 16.6134 6.32603C17.1843 6.12215 17.5754 5.9027 17.8048 5.70906C17.9296 5.60366 17.9768 5.53319 17.9937 5.5C17.9768 5.46681 17.9296 5.39634 17.8048 5.29094C17.5754 5.0973 17.1843 4.87785 16.6134 4.67397C15.4804 4.26933 13.8494 4 12 4C10.1506 4 8.5196 4.26933 7.38659 4.67397C6.81573 4.87785 6.42458 5.0973 6.19525 5.29094C6.07042 5.39634 6.02321 5.46681 6.00633 5.5ZM18 7.91726C17.7726 8.02403 17.5333 8.12123 17.2861 8.20951C15.8856 8.70968 14.0166 9 12 9C9.98341 9 8.1144 8.70968 6.71392 8.20951C6.46674 8.12123 6.22738 8.02403 6 7.91726V11.9866C6.00813 12.0073 6.03931 12.0661 6.14259 12.1624C6.31976 12.3277 6.63181 12.5252 7.10609 12.7189C8.04837 13.1039 9.43027 13.3932 11.051 13.476C11.6026 13.5042 12.0269 13.9741 11.9987 14.5257C11.9705 15.0773 11.5005 15.5016 10.949 15.4734C9.17744 15.3829 7.55934 15.0646 6.34969 14.5704C6.23097 14.5219 6.11419 14.4709 6 14.4173V18.4866C6.00813 18.5073 6.03931 18.5661 6.14259 18.6624C6.31976 18.8277 6.63181 19.0252 7.10609 19.2189C8.04837 19.6039 9.43027 19.8932 11.051 19.976C11.6026 20.0042 12.0269 20.4741 11.9987 21.0257C11.9705 21.5773 11.5005 22.0016 10.949 21.9734C9.17744 21.8829 7.55934 21.5646 6.34969 21.0704C5.74801 20.8246 5.19611 20.5146 4.77833 20.1249C4.35948 19.7341 4 19.1866 4 18.5V5.5C4 4.74631 4.43048 4.16346 4.90494 3.76283C5.38405 3.35829 6.01803 3.03902 6.71392 2.79049C8.1144 2.29032 9.98341 2 12 2C14.0166 2 15.8856 2.29032 17.2861 2.79049C17.982 3.03902 18.616 3.35829 19.0951 3.76283C19.5695 4.16346 20 4.74631 20 5.5V10C20 10.5523 19.5523 11 19 11C18.4477 11 18 10.5523 18 10V7.91726ZM17.5 13C18.0523 13 18.5 13.4477 18.5 14V14.6707C18.851 14.7948 19.172 14.9823 19.4492 15.2195L20.0308 14.8837C20.5091 14.6075 21.1207 14.7714 21.3968 15.2497C21.673 15.728 21.5091 16.3396 21.0308 16.6157L20.4499 16.9511C20.4828 17.1291 20.5 17.3125 20.5 17.5C20.5 17.6873 20.4828 17.8707 20.45 18.0485L21.0308 18.3838C21.5091 18.6599 21.6729 19.2715 21.3968 19.7498C21.1206 20.2281 20.5091 20.392 20.0308 20.1158L19.4495 19.7803C19.1722 20.0176 18.8511 20.2052 18.5 20.3293V21C18.5 21.5523 18.0523 22 17.5 22C16.9477 22 16.5 21.5523 16.5 21V20.3293C16.1489 20.2052 15.8277 20.0176 15.5504 19.7802L14.969 20.1159C14.4907 20.392 13.8791 20.2282 13.603 19.7499C13.3269 19.2716 13.4907 18.66 13.969 18.3839L14.55 18.0484C14.5172 17.8706 14.5 17.6873 14.5 17.5C14.5 17.3127 14.5172 17.1294 14.55 16.9515L13.9691 16.6161C13.4908 16.34 13.3269 15.7284 13.6031 15.2501C13.8792 14.7718 14.4908 14.608 14.9691 14.8841L15.5504 15.2197C15.8278 14.9824 16.1489 14.7948 16.5 14.6707V14C16.5 13.4477 16.9477 13 17.5 13ZM16.624 17.0174C16.6274 17.0117 16.6308 17.0059 16.6342 17.0001C16.6374 16.9946 16.6405 16.989 16.6436 16.9834C16.8187 16.6937 17.1367 16.5 17.5 16.5C17.8645 16.5 18.1835 16.6951 18.3583 16.9865C18.3607 16.9909 18.3632 16.9953 18.3658 16.9997C18.3685 17.0044 18.3713 17.0091 18.3741 17.0138C18.4543 17.1577 18.5 17.3235 18.5 17.5C18.5 17.6737 18.4557 17.8371 18.3778 17.9794C18.3737 17.9861 18.3697 17.9929 18.3657 17.9998C18.3619 18.0064 18.3581 18.0131 18.3545 18.0198C18.1789 18.3077 17.8619 18.5 17.5 18.5C17.1362 18.5 16.8178 18.3058 16.6428 18.0154C16.64 18.0102 16.6371 18.005 16.6341 17.9999C16.631 17.9945 16.6278 17.9891 16.6246 17.9838C16.5452 17.8404 16.5 17.6755 16.5 17.5C16.5 17.325 16.545 17.1605 16.624 17.0174Z",fill:"currentColor"})}),Te=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 h-5 w-5 text-gray-400",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),P=()=>e.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 h-5 w-5 text-green-700",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Ze=()=>e.jsx("svg",{stroke:"currentColor",fill:"#fff",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M13 10H20L11 23V14H4L13 1V10Z"})}),As=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-2 w-2 text-gizmo-gray-950 dark:text-gray-200",height:"16",width:"16",children:e.jsx("path",{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2z",strokeWidth:"0"})}),Ps=({className:t="",handleCopy:s})=>e.jsx("svg",{onClick:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",className:`text-gray-500 h-4 w-4 ${t}`,children:e.jsx("path",{d:"M7 4V2H17V4H20.0066C20.5552 4 21 4.44495 21 4.9934V21.0066C21 21.5552 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5551 3 21.0066V4.9934C3 4.44476 3.44495 4 3.9934 4H7ZM7 6H5V20H19V6H17V8H7V6ZM9 4V6H15V4H9Z",fill:"currentColor"})}),Ts=({className:t="",onClick:s})=>e.jsx("svg",{onClick:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",fill:"none",className:`text-gray-500 h-4 w-4 ${t}`,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 2.5C5.05228 2.5 5.5 2.94772 5.5 3.5V5.07196C7.19872 3.47759 9.48483 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C7.1307 21.5 3.11828 17.8375 2.565 13.1164C2.50071 12.5679 2.89327 12.0711 3.4418 12.0068C3.99033 11.9425 4.48712 12.3351 4.5514 12.8836C4.98798 16.6089 8.15708 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 7.85786 16.1421 4.5 12 4.5C9.7796 4.5 7.7836 5.46469 6.40954 7H9C9.55228 7 10 7.44772 10 8C10 8.55228 9.55228 9 9 9H4.5C3.96064 9 3.52101 8.57299 3.50073 8.03859C3.49983 8.01771 3.49958 7.99677 3.5 7.9758V3.5C3.5 2.94772 3.94771 2.5 4.5 2.5Z",fill:"currentColor"})}),Ss=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"m-1 text-black dark:text-white",children:e.jsx("path",{d:"M17 13L12 18L7 13M12 6L12 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Is=()=>e.jsxs("svg",{className:"h-4 w-4",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M8.78158 8.60266L9.8188 5.49098C10.037 4.83634 10.963 4.83634 11.1812 5.49098L12.2184 8.60266C12.7187 10.1035 13.8965 11.2813 15.3973 11.7816L18.509 12.8188C19.1637 13.037 19.1637 13.963 18.509 14.1812L15.3973 15.2184C13.8965 15.7187 12.7187 16.8965 12.2184 18.3973L11.1812 21.509C10.963 22.1637 10.037 22.1637 9.8188 21.509L8.78158 18.3973C8.28128 16.8965 7.10354 15.7187 5.60266 15.2184L2.49098 14.1812C1.83634 13.963 1.83634 13.037 2.49098 12.8188L5.60266 11.7816C7.10354 11.2813 8.28128 10.1035 8.78158 8.60266Z",fill:"currentColor"}),e.jsx("path",{d:"M17.1913 3.69537L17.6794 2.23105C17.7821 1.92298 18.2179 1.92298 18.3206 2.23105L18.8087 3.69537C19.0441 4.40167 19.5983 4.9559 20.3046 5.19133L21.769 5.67944C22.077 5.78213 22.077 6.21787 21.769 6.32056L20.3046 6.80867C19.5983 7.0441 19.0441 7.59833 18.8087 8.30463L18.3206 9.76895C18.2179 10.077 17.7821 10.077 17.6794 9.76895L17.1913 8.30463C16.9559 7.59833 16.4017 7.0441 15.6954 6.80867L14.231 6.32056C13.923 6.21787 13.923 5.78213 14.231 5.67944L15.6954 5.19133C16.4017 4.9559 16.9559 4.40167 17.1913 3.69537Z",fill:"currentColor"})]}),ut=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.70711 10.2929C7.31658 9.90237 6.68342 9.90237 6.29289 10.2929C5.90237 10.6834 5.90237 11.3166 6.29289 11.7071L11.2929 16.7071C11.6834 17.0976 12.3166 17.0976 12.7071 16.7071L17.7071 11.7071C18.0976 11.3166 18.0976 10.6834 17.7071 10.2929C17.3166 9.90237 16.6834 9.90237 16.2929 10.2929L13 13.5858L13 4C13 3.44771 12.5523 3 12 3C11.4477 3 11 3.44771 11 4L11 13.5858L7.70711 10.2929ZM5 19C4.44772 19 4 19.4477 4 20C4 20.5523 4.44772 21 5 21H19C19.5523 21 20 20.5523 20 20C20 19.4477 19.5523 19 19 19L5 19Z",fill:"currentColor"})}),_s=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("g",{id:"\uD83D\uDD0D-Product-Icons",stroke:"currentColor",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"ic_fluent_dark_theme_24_regular",fill:"currentColor",fillRule:"nonzero",children:e.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,20.5 L12,3.5 C16.6944204,3.5 20.5,7.30557963 20.5,12 C20.5,16.6944204 16.6944204,20.5 12,20.5 Z"})})})}),ve=({className:t})=>e.jsxs("svg",{className:`animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700 dark:text-white ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-0",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ye=()=>{const t=document.querySelector("#sidebar"),s=document.querySelector("#mask");t.classList.add("hidden"),s.classList.add("hidden")},$s=()=>{const t=ce(),[{isPlus:s}]=m("Account"),[{},{setUpgradeModalOpen:r}]=m("Modal"),[n,{setSessionId:a,setModelType:l}]=m("Session");return e.jsxs("div",{className:"mb-1 flex flex-col gap-2",children:[e.jsxs(st,{className:"flex p-3 items-center gap-3 transition-colors duration-200 text-black hover:!text-black dark:text-white dark:hover:!text-white cursor-pointer text-sm rounded-md border border-black/10 dark:border-white/20 bg-gray-400/10 hover:bg-gray-400/20 dark:hover:bg-gray-500/10 h-11 flex-shrink-0 flex-grow",to:"",onClick:()=>{a(""),l("GPT3_5"),Ye()},children:[e.jsx(ks,{}),"新对话"]}),e.jsxs("div",{className:"image-lab-btn flex flex p-3  items-center gap-3 transition-colors duration-200 text-white cursor-pointer border border-white/30 text-sm rounded-md bg-gradient-to-r from-indigo-500 hover:white h-11 flex-shrink-0 flex-grow",onClick:()=>{if(!s){r(!0);return}a(""),Ye(),l("DALL_E_3"),t("")},children:[e.jsx(Is,{}),e.jsxs("div",{children:[e.jsx("div",{children:"Image Labs"}),e.jsx("div",{className:"text-xs text-gray-200",children:"Dall-E 3 图片生成"})]})]})]})},Ds=({session:t,active:s,onDelete:r})=>{const[n,a]=g.useState(!1);return e.jsx("li",{className:"relative",style:{opacity:1,height:"auto",transform:"none",transformOrigin:"50% 50% 0px"},children:e.jsxs(st,{className:`flex py-3 px-3 items-center gap-3 relative rounded-md hover:!text-gray-900  hover:bg-black/10 dark:hover:bg-white/10 dark:hover:!text-white cursor-pointer break-all )} )} hover:pr-4 group ${s?"bg-gray-200 dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"}`,onClick:()=>{const l=document.querySelector("#sidebar"),i=document.querySelector("#mask");l.classList.add("hidden"),i.classList.add("hidden")},to:`c/${t?.id}`,children:[e.jsx(xt,{}),e.jsxs("div",{className:"flex-1 text-ellipsis max-h-5 overflow-hidden break-all relative",children:[t.title,e.jsx("div",{className:`absolute inset-y-0 right-0 w-8 z-10 bg-gradient-to-l ${s?"bg-gradient-to-l from-gray-100 dark:from-gray-800":"hidden"}`})]}),s&&e.jsx("div",{className:"absolute flex right-1 z-10 text-gray-700 dark:text-gray-300 visible",children:e.jsx("button",{className:"p-1 hover:text-gray-700 dark:hover:text-white",onClick:l=>{l.preventDefault(),l.stopPropagation(),!n&&(a(!0),D("/session/del",{sessionId:t?.id}).then(()=>{a(!1),r()}).catch(()=>{a(!1)}))},children:n?e.jsx(ve,{}):e.jsx(Ns,{})})})]})})},qs=()=>e.jsx("div",{className:"absolute left-0 top-14 z-20 overflow-hidden transition-all duration-500 invisible max-h-0",children:e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-3",children:e.jsx("div",{className:"p-1 text-sm text-gray-900 dark:text-gray-100"})})}),Es=()=>{const{sessionId:t}=Re(),s=ce(),[{sessions:r,loaded:n},{refresh:a}]=m("Session"),l=fs(r),i=Object.keys(l).length;return e.jsx("div",{className:"flex-col flex-1 transition-opacity duration-500 overflow-y-auto -mr-1",style:{height:"calc(100vh - 120px)",maxHeight:"calc(100vh - 120px)",overflow:"auto"},children:n?e.jsx("div",{className:"h-full flex flex-col gap-2 pb-2 text-gray-900 dark:text-gray-100 text-sm",children:e.jsx("div",{className:"h-full",children:i>0?e.jsx("span",{children:Object.keys(l).map(o=>{const d=l[o];return e.jsxs("div",{className:"relative",style:{height:"auto",opacity:1,transform:"none",transformOrigin:"50% 50% 0px"},children:[e.jsx("div",{className:"sticky top-0 z-[14]",children:e.jsx("h3",{className:"h-9 pb-2 pt-3 px-3 text-xs text-gray-500 font-medium text-ellipsis overflow-hidden break-all bg-gray-50 dark:bg-gray-900",children:o})}),e.jsx("ol",{children:d.map(c=>e.jsx(Ds,{session:c,active:t===c?.id,onDelete:()=>{a(),s("");const u=document.querySelector("#sidebar"),p=document.querySelector("#mask");u.classList.add("hidden"),p.classList.add("hidden")}},c?.id))})]},o)})}):e.jsxs("div",{className:"h-full flex-1 flex flex-col text-gray-500 items-center justify-center text-white",children:[e.jsx(_t,{image:e.jsx($t,{style:{width:150,height:150}})}),e.jsx("div",{className:"text-sm text-gray-500",children:"暂无历史对话"})]})})}):e.jsx("div",{className:"flex h-full w-full flex-col p-2 justify-center items-center",style:{height:"calc(100vh - 120px)"},children:e.jsx(ve,{})})})},Us=({})=>{const[{user:t,profile:s,profileFetched:r,isPlus:n},{setUser:a}]=m("Account"),[{},{setUpgradeModalOpen:l,setMembershipModalOpen:i,setWxkfQRCodeModalOpen:o}]=m("Modal"),{ref:d,isComponentVisible:c,setIsComponentVisible:u}=ys(!1),[p,j]=g.useState(!1),C=()=>{localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(console.log("准备切换亮色模式"),document.querySelector("html").classList.remove("dark"),document.body.removeAttribute("theme-mode"),localStorage.theme="light"):(console.log("准备切换暗色模式"),document.querySelector("html").classList.add("dark"),localStorage.theme="dark",document.body.setAttribute("theme-mode","dark")),u(!1)};return e.jsxs("div",{className:`border-black/5 dark:border-white/20 pt-2 flex flex-col gap-2 ${n?"border-t":""}`,children:[s?.id&&!n&&e.jsxs("div",{className:"flex flex-col items-center w-full bg-black/5 dark:bg-white/10 border-0 h-auto rounded-md p-4 gap-3 shadow-sm drop-shadow-sm",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-white mb-4 space-y-2 font-semibold",children:["现在体验 Claude 3 Opus",e.jsx("br",{}),"与 Claude 3 PDF 文档解析！"]}),e.jsxs("button",{className:"background-animate w-full flex justify-center items-center rounded-lg h-10 px-4 py-2 text-white border-0 text-sm font-medium",onClick:()=>{l(!0),I.track("OpenUpgradeModal",{from:"SidebarFixed"})},style:{backgroundImage:"linear-gradient(to right, #68d391, #3b82f6)",transition:"background 0.1s ease"},children:["季度付费每月仅需 69 元",e.jsx(Ze,{})]})]}),e.jsxs("div",{className:"group relative","data-headlessui-state":c?"open":"",children:[e.jsxs("button",{onClick:()=>{u(!0)},"data-headlessui-state":c?"open":"",className:`flex w-full items-center gap-2.5 rounded-md px-3 py-3 text-sm transition-colors duration-200 hover:bg-gray-200 dark:hover:bg-gray-800 ${c?"bg-gray-200 dark:bg-gray-800":""}`,children:[e.jsx("div",{className:"grow overflow-hidden text-ellipsis whitespace-nowrap text-left text-black dark:text-white",children:t?.email}),e.jsx(Cs,{})]}),e.jsx("div",{ref:d,children:c&&e.jsxs("div",{className:"absolute bottom-full left-0 z-20 mb-2 w-full overflow-hidden rounded-md bg-white dark:bg-black py-1.5 outline-none opacity-100 translate-y-0 shadow-lg",children:[e.jsx("nav",{role:"node"}),r&&e.jsxs("a",{className:"flex p-3 items-center gap-3 transition-colors duration-200 cursor-pointer text-sm text-black dark:text-white hover:!text-black dark:hover:!text-white  hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n?(i(!0),I.track("OpenSubManageModal",{from:"SubManage"})):(l(!0),I.track("OpenUpgradeModal",{from:"SubManage"}))},children:[e.jsx(Ze,{}),"订阅管理"]}),e.jsxs("a",{className:"flex p-3 items-center gap-3 transition-colors duration-200 cursor-pointer text-sm text-black dark:text-white hover:!text-black dark:hover:!text-white  hover:bg-gray-100 dark:hover:bg-gray-700",onClick:C,children:[e.jsx(_s,{}),"主题切换"]}),e.jsxs("a",{className:"flex p-3 items-center gap-3 transition-colors duration-200 cursor-pointer text-sm text-black dark:text-white hover:!text-black dark:hover:!text-white  hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{o(!0)},children:[e.jsx(xt,{}),"联系我们"]}),e.jsxs("a",{className:"flex p-3 items-center gap-3 transition-colors duration-200 cursor-pointer text-sm text-black dark:text-white hover:!text-black dark:hover:!text-white  hover:bg-gray-100 dark:hover:bg-gray-700",href:"https://chatanything.notion.site/chatanything/Plus-Q-A-88ab33d5f9ed47678853dae17daa2eab",target:"_blank",children:[e.jsx(Ms,{}),"Plus 会员 Q&A"]}),e.jsxs("a",{className:"flex p-3 items-center gap-3 transition-colors duration-200 cursor-pointer text-sm text-black dark:text-white hover:!text-black dark:hover:!text-white  hover:bg-gray-100 dark:hover:bg-gray-700",href:"https://chatanything.notion.site/chatanything/ChatAnything-87e472a0d123410c972b72316e994a8d",target:"_blank",children:[e.jsx(mt,{}),"更新日志"]}),e.jsx("div",{className:"my-1.5 h-px bg-gray-100 dark:bg-white/20",role:"none"}),e.jsxs("a",{className:"flex p-3 items-center gap-3 transition-colors duration-200  cursor-pointer text-sm text-black dark:text-white hover:!text-black dark:hover:!text-white  hover:bg-gray-100 dark:hover:bg-gray-700",onClick:async()=>{if(p)return;if(j(!0),!await be.getCurrentUser()){j(!1);return}await be.logout(),j(!1),a({}),u(!1)},children:[p?e.jsx(ve,{}):e.jsx(Ls,{}),"登出"]})]})})]})]})},Rs=()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute text-gray-800 dark:text-white text-4xl top-3 right-3 cursor-pointer bg-gray-200 dark:bg-gray-800 lg:invisible",style:{zIndex:100,width:40,height:40,borderRadius:10,display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #666"},onClick:()=>{const t=document.querySelector("#sidebar"),s=document.querySelector("#mask");t.classList.remove("hidden"),s.classList.remove("hidden")},children:e.jsx(It,{})}),e.jsx("div",{id:"mask",className:"fixed left-0 top-0 w-full h-full hidden backdrop-blur-sm transition duration-2000",style:{zIndex:150},onClick:()=>{const t=document.querySelector("#sidebar"),s=document.querySelector("#mask");t.classList.add("hidden"),s.classList.add("hidden")}}),e.jsxs("div",{id:"sidebar",className:"relative left-0 h-full lg:block hidden lg:w-[260px] w-[0px] text-left",style:{zIndex:200},children:[e.jsx("div",{className:"h-full lg:w-[260px] w-[0px]"}),e.jsx("div",{className:`sidebar fixed top-0 bottom-0 lg:left-0 duration-1000
    p-0 bg-gray-50 dark:bg-gray-900 shadow h-screen"`,children:e.jsx("div",{className:"h-full flex-shrink-0 overflow-x-hidden bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col ",children:e.jsx("div",{className:"scrollbar-trigger relative h-full w-full flex-1 items-start border-black/20 dark:border-white/20",children:e.jsxs("nav",{className:"flex h-full w-full flex-col p-2",children:[e.jsx($s,{}),e.jsx(qs,{}),e.jsx(Es,{}),e.jsx(Us,{})]})})})})})})]})]}),Oe=()=>e.jsx(e.Fragment,{children:e.jsxs("svg",{width:"300px",height:"200px",viewBox:"0 0 187.3 93.7",preserveAspectRatio:"xMidYMid meet",style:{left:"50%",top:"50%",position:"absolute",transform:"translate(-50%, -50%) matrix(1, 0, 0, 1, 0, 0)"},children:[e.jsx("path",{stroke:"#ededed",id:"outline",fill:"none",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 	c-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z"}),e.jsx("path",{id:"outline-bg",opacity:"0.05",fill:"none",stroke:"#ededed",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 	c-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z"})]})}),we=({loading:t,text:s,disabled:r,onClick:n})=>r?e.jsx("button",{className:"opacity-50 hover:bg-inherit cursor-not-allowed btn relative btn-primary dark:text-gray-white border-none !bg-gray-300 py-3 font-semibold !text-gray-800 hover:bg-gray-300 dark:bg-gray-500 dark:opacity-100",children:e.jsx("div",{className:"flex w-full gap-2 items-center justify-center",children:e.jsx("span",{className:"inline-block",children:s})})}):e.jsx("button",{className:"background-animate btn relative btn-primary border-none py-3 font-semibold",style:{backgroundImage:"linear-gradient(to right, #68d391, #3b82f6)",transition:"background 0.1s ease"},onClick:()=>{t||n()},children:e.jsxs("div",{className:"flex w-full gap-2 items-center justify-center",children:[t&&e.jsx(ve,{}),e.jsx("span",{className:"inline-block text-white",children:s})]})}),Vs=({})=>{const[{announcementModalOpen:t},{setAnnouncementModalOpen:s}]=m("Modal");return e.jsx(Q,{title:"\uD83D\uDE80 更新公告",visible:t,onClose:()=>{s(!1)},children:e.jsx("div",{className:"grid sm:grid-cols-1 lg:w-96",children:e.jsx("div",{className:"relative order-1 col-span-1 sm:order-2 min-w-[280px]",children:e.jsxs("div",{className:"p-4 flex flex-col gap-3 bg-white z-20 relative dark:bg-gray-900",children:[e.jsx("div",{className:"text-xl font-semibold justify-between items-center flex",children:e.jsxs("span",{children:["本次更新内容 v",Ue]})}),e.jsxs("div",{className:"gap-2 flex flex-col justify-start items-start text-sm",children:[e.jsx("span",{children:"ChatAnything 现已支持最强大模型 Claude 3 Opus！"}),e.jsx("span",{children:"Claude 3 模型已支持 PDF 文档解析"})]}),e.jsx("div",{className:"flex justify-start items-center",children:e.jsxs("a",{className:"flex py-3 justify-center items-center gap-1 transition-colors duration-200 text-sm text-gray-500 cursor-pointer hover:text-semibold",href:"https://chatanything.notion.site/chatanything/ChatAnything-87e472a0d123410c972b72316e994a8d",target:"_blank",children:[e.jsx(mt,{}),"更新日志"]})}),e.jsx(we,{text:"知道啦",onClick:()=>s(!1)})]})})})})};let Se=null;const Os=()=>{const[{isPlus:t},{refreshProfile:s}]=m("Account"),[{alipayQRCodeModalUrl:r},{setAlipayQRCodeModalUrl:n,setUpgradeModalOpen:a}]=m("Modal"),l=!!r,i=ce();return g.useEffect(()=>{t&&l&&(M.success("支付成功，您已升级 Plus 会员"),i(""),n(""),a(!1))},[t,l]),g.useEffect(()=>{if(l)return Se=setInterval(()=>{s()},5e3),()=>{Se&&clearInterval(Se)}},[l]),e.jsx(Q,{title:"扫码支付",visible:l,onClose:()=>{n("")},children:e.jsxs("div",{className:"flex flex-col justify-center items-center m-10",children:[e.jsx("div",{className:"border-2 border-white",children:e.jsx(Dt,{size:256,value:r,imageSettings:{src:"/static/wechat.png",height:40,width:40,excavate:!0}})}),e.jsx("div",{className:"m-3 text-sm text-gray-500",children:"打开微信，扫一扫付款"})]})})},Fs=({})=>{const[{profile:t}]=m("Account"),[{membershipModalOpen:s},{setMembershipModalOpen:r}]=m("Modal");return e.jsx(Q,{title:"套餐信息",visible:s,onClose:()=>{r(!1)},children:e.jsx("div",{className:"grid sm:grid-cols-1",children:e.jsx("div",{className:"relative order-1 col-span-1 sm:order-2 min-w-[280px]",children:e.jsxs("div",{className:"p-4 flex flex-col gap-3 bg-white z-20 relative dark:bg-gray-900",children:[e.jsx("div",{className:"text-xl font-semibold justify-between items-center flex",children:e.jsx("span",{children:"Plus 版"})}),e.jsx(we,{disabled:!0,text:"您的当前版本"}),e.jsx("p",{className:"text-sm text-gray-500",children:`当前套餐到期时间： ${qt(t?.membershipExpiredTime).format("YYYY年MM月DD日")}`}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持长上下文感知的 Claude 3 对话"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持基于 Claude 3 的 PDF 文档解析"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持推理与准确性更强的 GPT-4 对话"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持基于 GPT-4 Vision 智能图片识别"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持基于 Dall-E 3 的高精度图片生成"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"高级功能优先体验"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"优先的服务支持"})]})]})})})})},Bs=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,gt=()=>{const t=window.navigator.userAgent;return Bs.test(t)?"mobile":"pc"},Gs=gt(),Hs=()=>{const[{},{setWxkfQRCodeModalOpen:t}]=m("Modal");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-3 text-xs font-semibold flex flex-wrap",children:[e.jsx("a",{className:"underline cursor-pointer text-gray-500 hover:!text-gray-400 dark:hover:!text-white",href:"https://chatanything.notion.site/chatanything/Plus-Q-A-88ab33d5f9ed47678853dae17daa2eab",target:"_blank",children:"了解更多"}),e.jsx("div",{className:"mx-1",children:"或"}),e.jsx("div",{className:"text-primary cursor-pointer hover:opacity-70 transition duration-500",onClick:()=>{t(!0)},children:"联系客服"})]})})},zs=({paymentDuration:t,onChange:s})=>{const[{countdown:r}]=m("System");return e.jsxs("div",{className:"relative self-center mt-6 rounded-lg p-0.5 flex sm:mt-8 border border-gray-200 dark:border-gray-800",children:[Ve.map(n=>e.jsx("button",{type:"button",onClick:()=>s(n.key),className:`relative w-1/2 border-gray-700 shadow-sm text-black dark:text-white rounded-md m-1 py-2 text-sm font-medium whitespace-nowrap focus:outline-none focus:ring-2 px-6 sm:w-auto sm:px-8 ${t===n.key&&"bg-gray-200 dark:bg-gray-800"}`,children:n.label},n.key)),r&&e.jsx("div",{className:"absolute top-[-8px] right-[-56px] text-xs ml-1 bg-green-700 rounded-full p-1",children:"节省7个月！"})]})};let Ie=null,_e=!1;const Ws=({})=>{const t=gt(),[{isPlus:s},{refreshProfile:r}]=m("Account"),[{upgradeModalOpen:n},{setAlipayQRCodeModalUrl:a,setUpgradeModalOpen:l}]=m("Modal"),[i,o]=g.useState(!1),[d,c]=g.useState(Ve[0].key);_e=s;const u=ce();return g.useEffect(()=>{if(o(!1),n&&t==="mobile")return Ie=setInterval(()=>{r()},5e3),()=>{Ie&&clearInterval(Ie)}},[n]),g.useEffect(()=>{!_e&&s&&n&&t==="mobile"&&(M.success("支付成功，您已升级 Plus 会员"),u(""),a(""),l(!1),_e=!0)},[s,n]),e.jsx(Q,{title:"套餐信息",visible:n,onClose:()=>{l(!1),r()},children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(zs,{paymentDuration:d,onChange:c}),e.jsxs("div",{className:`grid ${s?"sm:grid-cols-1":"sm:grid-cols-2"}`,children:[e.jsx("div",{className:"relative order-1 col-span-1 border border-gray-300 dark:border-gray-700 sm:order-1 sm:border mt-5 sm:my-5 mx-3 sm:ml-5 sm:mr-3 rounded-lg min-w-[280px]",children:e.jsxs("div",{className:"p-4 flex flex-col rounded=md gap-3 bg-white z-20 relative dark:bg-gray-900 rounded-lg",children:[e.jsx("div",{className:"text-xl font-semibold justify-between items-center flex",children:e.jsx("span",{children:"基础版"})}),e.jsx(we,{text:"当前版本",disabled:!0}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(Te,{}),e.jsx("span",{children:"支持基础 GPT-3.5 对话"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(Te,{}),e.jsx("span",{children:"有限的对话上下文长度"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(Te,{}),e.jsx("span",{children:"有限的服务支持"})]})]})}),e.jsx("div",{className:"relative order-2 col-span-1 border sm:order-2 sm:border mt-5 mb-5 sm:my-5 mx-3 sm:mr-5 sm:ml-3 rounded-lg min-w-[280px]",style:{border:"2px solid transparent",backgroundClip:"padding-box, border-box",backgroundOrigin:"padding-box, border-box",backgroundImage:"linear-gradient(to right, #222, #222), linear-gradient(90deg,#68d391, #3b82f6)"},children:e.jsxs("div",{className:"p-4 flex flex-col gap-3 bg-white z-20 relative dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-semibold justify-between items-center flex",children:[e.jsx("span",{children:"Plus 版"}),e.jsxs("span",{className:"font-semibold text-gray-500",children:[e.jsx("span",{className:"line-through text-sm pr-1",children:Ne[d].originalPrice}),Ne[d].currentPrice]})]}),e.jsx(we,{loading:i,disabled:s,text:Ne[d].btnText,onClick:async()=>{o(!0),I.track("ClickUpgrade");try{const{data:p}=await D("/wechatpay/create-checkout-session",{paymentDuration:d});console.log(p);const j=p?.payRes?.qrcode,C=p?.payRes?.payurl,b=j||C;t==="pc"?a(b):window.location.href=b}catch{o(!1)}o(!1);try{gtag_report_conversion()}catch{}}}),e.jsx("div",{className:"text-gray-500 text-xs",children:"当前付费方案均为单次而非连续包月"}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持无限制使用最强模型 Claude 3 Opus 对话"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-start text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持基于 Claude 3 的 PDF 文档解析；影印本 PDF 支持至多 50 页 OCR 解析"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"订阅期内无限制使用准确性更强的 GPT-4 对话"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持基于 GPT-4 Vision 智能图片识别"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"支持基于 Dall-E 3 的高精度图片生成"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"更长的对话上下文长度"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"高级功能优先体验"})]}),e.jsxs("div",{className:"gap-2 flex flex-row justify-start items-center text-sm",children:[e.jsx(P,{}),e.jsx("span",{children:"优先的服务支持"})]}),e.jsx(Hs,{})]})})]})]})})},Zs=({})=>{const[{wxkfQRCodeModalOpen:t},{setWxkfQRCodeModalOpen:s}]=m("Modal");return e.jsx(Q,{title:"联系客服",visible:t,onClose:()=>{s(!1)},children:e.jsx("div",{className:"flex flex-col justify-center items-center m-10",children:e.jsx("img",{src:"/static/wxkf.png",className:"w-[300px] h-[390px] rounded",alt:""})})})},Qe=(t,s)=>{let r;return function(){const n=arguments,a=this;r||(t.apply(a,n),r=!0,setTimeout(()=>r=!1,s))}},Ys=(t,s="")=>{let r=new Image;r.setAttribute("crossOrigin","anonymous"),r.src=t,r.onload=()=>{let n=document.createElement("canvas");n.width=r.width,n.height=r.height,n.getContext("2d").drawImage(r,0,0,r.width,r.height),n.toBlob(l=>{let i=URL.createObjectURL(l),o=document.createElement("a");o.href=i,o.target="_blank",o.download=s,o.click(),o.remove(),URL.revokeObjectURL(i)})}},Qs=()=>{const[{imageData:t},{clearImageViewData:s}]=m("Modal"),r=!!t?.url;return e.jsx(Q,{title:"",visible:r,fullscreen:!0,onClose:()=>{s()},children:e.jsxs("div",{className:"flex flex-col h-[100vh] w-full",children:[e.jsxs("div",{className:"flex justify-between items-center w-full px-5 h-16",children:[e.jsx("div",{className:"h-10 flex justify-between items-center cursor-pointer hover:opacity-70 transition duration-500 text-white",onClick:s,children:e.jsx(je,{})}),e.jsx("div",{onClick:()=>{Ys(t?.url,t.text)},className:"h-10 flex justify-between items-center cursor-pointer hover:opacity-70 transition duration-500 text-white",children:e.jsx(ut,{})})]}),e.jsx("div",{className:"flex flex-col justify-center items-center w-full flex-1",children:e.jsx("img",{className:"w-[800px] max-h-[100%] max-w-[100%] aspect-square object-contain rounded-md",src:t?.url,alt:t?.text})})]})})};Et.GlobalWorkerOptions.workerSrc="/static/pdf.worker.min.js";const Ks={cMapUrl:"/cmaps/",standardFontDataUrl:"/standard_fonts/"},Js=({url:t,pageRatio:s})=>{const r=g.useRef(null),[n,a]=g.useState(),l=window.innerWidth>900?900:window.innerWidth,i="100vh";return e.jsx("div",{id:"test",className:"pdf-content",ref:r,style:{height:i,width:"100vw",overflow:"auto",display:"flex",justifyContent:"center"},children:e.jsxs(Ut,{file:t,onLoadSuccess:({numPages:o})=>{a(o)},onLoadError:o=>{console.log(o)},options:Ks,loading:e.jsx("div",{style:{width:l,height:i,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Oe,{})}),children:[e.jsx("div",{className:"h-16"}),Array.from(new Array(n),(o,d)=>e.jsx("div",{style:{margin:"0 0 10px 0",width:l,minHeight:s?l*s:"auto"},children:e.jsx(Rt,{width:l,pageNumber:d+1,renderAnnotationLayer:!1})},`page_${d+1}`))]})})},Xs=()=>{const[{docData:t},{clearDocViewData:s}]=m("Modal"),r=!!t?.url;return e.jsx(Q,{title:"",visible:r,fullscreen:!0,onClose:()=>{s()},children:e.jsxs("div",{className:"dark flex flex-col h-[100vh] w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-5 h-16 glass-bg fixed top-0 left-0 w-full",style:{zIndex:10},children:[e.jsx("div",{className:"h-10 flex justify-between items-center cursor-pointer hover:opacity-70 transition duration-500 text-white",onClick:s,children:e.jsx(je,{})}),e.jsx("a",{href:t?.url,download:!0,className:"h-10 flex justify-between items-center cursor-pointer hover:opacity-70 transition duration-500 text-white",children:e.jsx(ut,{})})]}),e.jsx("div",{className:"flex flex-col justify-center items-center w-full flex-1",children:e.jsx(Js,{url:t.url,pageRatio:t.pageRatio})})]})})},Q=({visible:t,title:s,onClose:r,children:n,fullscreen:a})=>e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:"fadein absolute inset-0 inset-0 backdrop-blur-sm",style:{zIndex:1e9},children:e.jsx("div",{className:"fixed inset-0 dark:bg-gray-500/10 dark:text-gray-100 animate-in fade-out-0 fade-in-0",style:{pointerEvents:"auto"},children:e.jsx("div",{className:`grid h-full w-full overflow-y-auto ${a?"slidein-short":"slidein-short grid-rows-[minmax(10px,_1fr)_auto_minmax(10px,_1fr)] md:grid-rows-[minmax(20px,_1fr)_auto_minmax(20px,_1fr)] grid-cols-[minmax(10px,30px)_1fr_minmax(10px,30px)]"}`,onClick:()=>{r&&r()},children:e.jsx("div",{role:"dialog",className:`relative col-auto row-auto w-full rounded-lg text-left shadow-xl transition-all bg-white dark:bg-gray-900 !bg-transparent !shadow-none ${a?"fixed left-0 md:w-[100vw] lg:[100vw] xl:w-[100vw]":"col-start-2 row-start-2 left-1/2 -translate-x-1/2 md:w-[672px] lg:w-[896px] xl:w-[1024px]"}`,onClick:l=>{l.stopPropagation()},children:e.jsxs("div",{className:`${a?"w-[100vw] h-[100vh]":""}`,children:[e.jsx("div",{className:`flex h-full flex-col items-center justify-start ${a?"w-[100vw] h-[100vh]":""}`,children:e.jsx("div",{className:`relative overflow-hidden ${a?"fixed w-[100vw] h-[100vh] top-0 left-0":""}`,children:e.jsxs("div",{className:`flex justify-center flex-col items-start overflow-hidden dark:border-gray-700 ${a?"w-[100vw] h-[100vh] bg-black/90":"grow rounded-md border shadow-md bg-white dark:bg-gray-900"}`,children:[e.jsxs("div",{className:`flex w-full flex-row items-center justify-between px-4 py-3 dark:border-gray-700 ${a?"hidden":"border-b"}`,children:[e.jsx("span",{className:"text-base font-semibold sm:text-base",children:s}),e.jsx("button",{className:"text-gray-700 opacity-50 transition hover:opacity-75 dark:text-white",onClick:()=>{r&&r()},children:e.jsx(je,{})})]}),e.jsx("div",{className:"h-full w-full",children:n})]})})}),e.jsx("div",{className:"mt-5 sm:mt-4"})]})})})})})}),er=()=>e.jsxs(e.Fragment,{children:[e.jsx(Qs,{}),e.jsx(Xs,{}),e.jsx(Vs,{}),e.jsx(Fs,{}),e.jsx(Ws,{}),e.jsx(Zs,{}),e.jsx(Os,{})]}),tr=()=>{const[{profileFetched:t,isPlus:s}]=m("Account"),[{modelType:r}]=m("Session");return e.jsxs("div",{className:"magic-in",children:[e.jsx("div",{className:"text-gray-800 w-full mx-auto md:max-w-2xl lg:max-w-3xl md:h-full md:flex md:flex-col px-6 py-10 dark:text-gray-100"}),e.jsxs("div",{className:"text-gray-800 w-full mx-auto md:max-w-2xl lg:max-w-3xl md:h-full md:flex md:flex-col px-6 dark:text-gray-100",children:[e.jsxs("div",{className:"block logo-area flex flex-col items-center justify-center",style:{height:"50vh"},children:[e.jsx(it,{modelType:r}),e.jsx("div",{className:"slidein-short mt-5 mb-5 text-2xl font-bold",children:"Image Labs"}),t?s?e.jsx("div",{className:"slidein text-center text-sm text-gray-500",children:e.jsx("a",{className:"underline",href:"https://chatanything.notion.site/chatanything/ChatAnything-Image-Labs-Beta-9337db0e73524177922e72fb36f07ec4",target:"_blank",children:"Dall-E 3 图片生成"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"slidein text-sm text-gray-500 p-1",children:["非 Plus 用户暂不支持 Image Labs，",e.jsx("a",{className:"text-white",href:"https://chatanything.notion.site/chatanything/ChatAnything-Image-Labs-Beta-9337db0e73524177922e72fb36f07ec4",target:"_blank",children:"查看详情"})]})}):e.jsx("div",{style:{height:30}})]}),e.jsx("div",{className:"h-32 md:h-48 flex-shrink-0"})]})]})},sr=["用简单的话解释一下量子计算","如何有创意地为 10 岁小孩生日庆生？","如何使用 JavaScript 发起一个 HTTP 请求？"],rr=({modelType:t,activeModelType:s,handleModelChange:r})=>e.jsx("li",{className:"w-full cursor-pointer",children:e.jsxs("div",{className:`inline-block w-full p-2 transition transition-all duration-450 ease-out text-gray-900 dark:text-white hover:bg-black/5 dark:hover:bg-white/10 rounded-md ${t===s?"focus:ring-4 focus:ring-white active focus:outline-none hover:bg-black/10 bg-black/5 dark:bg-white/10 dark:border-white/10 border-transparent":"focus:ring-4 focus:outline-none focus:ring-blue-300 border-transparent"}`,style:{height:52},onClick:()=>r(t),children:[e.jsx("div",{children:lt[t]}),e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:ss[t]})]})}),ar=({onClickPrompt:t})=>{const[{isPlus:s,profileFetched:r}]=m("Account"),[{modelType:n},{setModelType:a}]=m("Session"),[{},{setUpgradeModalOpen:l}]=m("Modal"),i=o=>{if(o!==n){if(ot[o]&&!s){l(!0),I.track("OpenUpgradeModal",{from:"ModelSwitch"});return}a(o)}};return n==="DALL_E_3"?e.jsx(tr,{}):e.jsxs("div",{className:"magic-in semi-always-dark",children:[e.jsx("div",{className:"text-gray-800 w-full mx-auto md:max-w-2xl lg:max-w-3xl md:h-full md:flex md:flex-col px-6 py-10 dark:text-gray-100",children:e.jsx("ul",{className:"text-sm font-medium text-center text-gray-500 gap-1 divide-gray-200 overflow-hidden flex dark:divide-gray-800 dark:text-gray-400",children:os.map(o=>e.jsx(rr,{modelType:o,activeModelType:n,handleModelChange:i},o))})}),e.jsxs("div",{className:"text-gray-800 w-full mx-auto md:max-w-2xl lg:max-w-3xl md:h-full md:flex md:flex-col px-6 dark:text-gray-100",children:[e.jsxs("h1",{className:"hidden md:block text-4xl font-semibold text-center mt-6 sm:mt-[5vh] ml-auto mr-auto mb-10 sm:mb-16 flex gap-2 items-center justify-center",children:["ChatAnything",e.jsxs("span",{className:"block mt-2 text-sm text-normal text-gray-500 hover:opacity-70 transition duration-500",children:["ChatAnything 现已支持"," ",e.jsx("b",{className:"text-black dark:text-white",children:"最强大模型 Claude 3 Opus"})," 与基于 Claude 3 的 ",e.jsx("b",{className:"text-black dark:text-white",children:"PDF 文档解析"}),"！"]})]}),e.jsxs("div",{className:"hidden md:block md:flex items-start text-center gap-3.5",children:[e.jsxs("div",{className:"flex flex-col mb-8 md:mb-auto gap-3.5 flex-1",children:[e.jsxs("h2",{className:"flex gap-3 items-center m-auto text-lg font-normal md:flex-col md:gap-2",children:[e.jsx(bs,{}),"示例用法"]}),e.jsx("ul",{className:"flex flex-col gap-3.5 w-full sm:max-w-md m-auto",children:sr.map(o=>e.jsxs("button",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md hover:bg-gray-200 dark:hover:bg-gray-900",onClick:()=>{t(o)},children:['"',o,'" →']},o))})]}),e.jsxs("div",{className:"flex flex-col mb-8 md:mb-auto gap-3.5 flex-1",children:[e.jsxs("h2",{className:"flex gap-3 items-center m-auto text-lg font-normal md:flex-col md:gap-2",children:[e.jsx(ws,{}),"功能"]}),e.jsxs("ul",{className:"flex flex-col gap-3.5 w-full sm:max-w-md m-auto",children:[e.jsx("li",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md ",children:"能记住与用户更早的对话内容，并基于该上下文回答"}),e.jsx("li",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md ",children:"用户可以提出追问问题，并提出更正意见"}),e.jsx("li",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md ",children:"经过训练，能智能减少不合适的对话内容"})]})]}),e.jsxs("div",{className:"flex flex-col mb-8 md:mb-auto gap-3.5 flex-1",children:[e.jsxs("h2",{className:"flex gap-3 items-center m-auto text-lg font-normal md:flex-col md:gap-2",children:[e.jsx(js,{}),"局限性"]}),e.jsxs("ul",{className:"flex flex-col gap-3.5 w-full sm:max-w-md m-auto",children:[e.jsx("li",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md ",children:"有时可能会生成不正确的信息与事实"}),e.jsx("li",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md ",children:"有时可能会生成有害的指导意见或有偏见的内容"}),e.jsx("li",{className:"w-full bg-gray-100 dark:bg-white/5 p-3 rounded-md ",children:"对 2021 年之后关于世界的知识有局限性"})]})]})]}),e.jsxs("div",{className:"block md:hidden logo-area flex flex-col items-center justify-center",style:{height:"50vh"},children:[e.jsx(it,{modelType:n}),e.jsx("div",{className:"slidein-short mt-5 mb-5 text-2xl font-bold",children:"ChatAnything"}),r?s?e.jsx("div",{className:"block md:hidden slidein text-sm text-gray-500",children:"你好，有什么我可以帮你的？\uD83D\uDC4F"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden text-sm text-gray-500 underline cursor-pointer p-1",onClick:()=>{l(!0),I.track("OpenUpgradeModal",{from:"Intro"})},children:"ChatAnything 现已支持 GPT-4V 图片识别！"}),e.jsx("div",{className:"hidden md:block slidein text-sm text-gray-500 p-1",children:"你好，有什么我可以帮你的？\uD83D\uDC4F"})]}):e.jsx("div",{style:{height:30}})]}),e.jsx("div",{className:"h-32 md:h-48 flex-shrink-0"})]})]})},nr=()=>{const[{profileFetched:t}]=m("Account"),[{sessionId:s}]=m("Session");return!t||!s?e.jsx("div",{className:"px-3 pb-3 pt-2 text-center text-xs text-gray-600 dark:text-gray-500 md:px-4 md:pb-6 md:pt-3",children:e.jsx("span",{children:"ChatAnything 可能会生成不准确的事实信息，请注意甄别"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block px-3 pb-3 pt-2 text-center text-xs text-gray-600 dark:text-gray-500 md:px-4 md:pb-6 md:pt-3",children:e.jsx("span",{children:"Shift + Enter 可换行输入内容，GPT-4 与 Claude 3 模型支持更长上下文"})}),e.jsx("div",{className:"block md:hidden px-3 pb-3 pt-2 text-center text-xs text-gray-600 dark:text-gray-500 md:px-4 md:pb-6 md:pt-3",children:e.jsx("span",{children:"ChatAnything 可能会生成不准确的事实信息，请注意甄别"})})]})},pt=({size:t="middle"})=>e.jsxs("div",{className:"bouncing-loader",style:{transform:t==="small"?"scale(0.5)":"scale(0.8)"},children:[e.jsx("div",{className:"bg-black dark:bg-white"}),e.jsx("div",{className:"bg-black dark:bg-white"}),e.jsx("div",{className:"bg-black dark:bg-white"})]}),lr=50*1024*1024,Ke=128e3,or=t=>t.trim()!=="";let oe=null,$e=!0,De=new AbortController,qe=new AbortController;const ir=t=>{const[{modelType:s}]=m("Session"),{sessionId:r}=Re(),[n,a]=g.useState(!1),{message:l,attachments:i,attachmentLoading:o,filehash:d,setMessage:c,setAttachments:u,setAttachmentLoading:p,setFilehash:j,onSubmit:C,loading:b,fetched:v,onPause:H,onFocus:re}=t,z=!or(l)||o,O=rs[s],q=()=>{const x=document.getElementById("prompt-textarea");x&&setTimeout(()=>{x.style.height="inherit",x.style.height=`${Math.min(x.scrollHeight,200)}px`,+x.style.height.replace("px","")>=200?a(!0):a(!1)},10)},W=async x=>{if(!x){M.error("请选择文件");return}const R=/image\//.test(x.type),F=x.type==="application/pdf";if(!R&&!F){M.error("请选择图片或 PDF 文件");return}if(x.size>lr){M.error("上传文件需小于 50M");return}try{let k=x,B="",K=0,G="";if(R){p(!0),k=await ze(x),B=URL.createObjectURL(k);const L=await Ce(k,{onProgress:({percent:ae})=>{u([{url:B,uploadPercent:ae,type:k.type,ratio:1,hash:G}])}});u([{url:L.url,uploadPercent:100,type:k.type,ratio:K||L.width/L.height,hash:G}])}if(F){p(!0),De.abort(),qe.abort();const L=await Kt(x,{onCover:T=>{u([{url:T.url,uploadPercent:100,type:k.type,ratio:1}])},onPage:({cover:T,page:me,totalPage:ue})=>{De=new AbortController,!De.signal.aborted&&u(te=>te.length?te[0].url!==T.url?te:[{url:T.url,uploadPercent:Math.floor(me/ue*100),type:k.type,ratio:1}]:[])}});if(!L.pages.some(T=>!!T)){M.error("无法解析文本"),p(!1),u([]);return}const de=L.pages?.join(`

`),J=Vt("gpt-4-1106-preview").encode(de).length;if(J>Ke){const T=((J-Ke)/J*100).toFixed(1);M.error(`文本量超出${T}%，请选择其他文件`),p(!1),u([]);return}J>1e4&&M.success("文档内容较长，请耐心等待解析"),B=L.cover.url,K=L.cover.imageRatio;const X=await Ce(k,{onProgress:({percent:T})=>{qe=new AbortController,!qe.signal.aborted&&L.canExtractText&&u([{url:B,uploadPercent:T,type:k.type,ratio:1,hash:G}])}}),ee=new File([L.cover.blob],`${x.name.replace("pdf","png")}`,{type:"image/png",lastModified:new Date().getTime()}),xe=await ze(ee),{url:ke}=await Ce(xe);L.canExtractText||M.success("影印版 PDF 解析目前处于实验阶段，可能会出现不准确的信息，请注意甄别");try{G=(await D("/file/analyse-large-text",{pages:L.pages,name:x.name,mime:x.type,url:X.url,size:x.size}))?.fileEmbbedings?.hash,j(G)}catch{M.error("解析文件失败，请上传其他文件"),p(!1),u([]);return}u([{url:ke,uploadPercent:100,type:k.type,ratio:K||X.width/X.height,hash:G,fileUrl:X.url}])}setTimeout(()=>{p(!1)},1e3)}catch(k){console.log("-> err",k),M.error("文件上传失败"),p(!1)}};return g.useEffect(()=>(b?oe=setInterval(()=>{},400):oe&&clearInterval(oe),()=>{oe&&clearInterval(oe)}),[b]),g.useEffect(()=>{const x=document.getElementById("prompt-textarea");x&&Gs==="pc"&&x.focus()},[r,s]),e.jsx("form",{className:"stretch mx-2 flex flex-row gap-3 last:mb-2 md:mx-4 md:last:mb-6 lg:mx-auto lg:max-w-2xl xl:max-w-3xl",children:e.jsx("div",{className:"relative flex h-full flex-1 items-stretch md:flex-col",children:e.jsxs("div",{className:"flex flex-col w-full py-[10px] flex-grow md:py-4 md:pl-4 relative border border-black/10 bg-white dark:border-gray-700 focus-within:dark:border-gray-600 dark:text-white dark:bg-gray-800 rounded-xl shadow-xs dark:shadow-xs transition-border-color duration-100",children:[e.jsx("textarea",{value:l,onCompositionStart:()=>{$e=!1},onCompositionEnd:()=>{$e=!0},onChange:x=>{c(x.target.value),q()},onFocus:re,onKeyDown:x=>{if(x.target,x.key==="Enter"&&(x.shiftKey||x.metaKey||x.altKey||b||z)){q();return}if(x.key==="Enter"&&$e){if(x.preventDefault(),!l)return;C(),q()}},onPaste:x=>{O&&[].forEach.call(x.clipboardData.items,R=>{const F=R.getAsFile();F&&(x.preventDefault(),W(F),M.success("正在上传文件"))})},id:"prompt-textarea",tabIndex:0,"data-id":"root",rows:1,placeholder:ns[s],className:`m-0 w-full resize-none border-0 bg-transparent p-0 pr-[50px] focus:ring-0 focus-visible:ring-0 dark:bg-transparent pl-3 md:pl-0 ${O?"pr-[70px]":""}`,style:{maxHeight:200,height:24,overflowY:n?"initial":"hidden","--prompt-textarea-bg":ie[s]}}),O&&v&&!b&&(o?e.jsx("div",{className:"absolute p-1 rounded-md bottom-[8px] md:bottom-3 md:p-2 md:right-6 right-5 text-gray-500 transition cursor-pointer",children:e.jsx(pt,{size:"small"})}):e.jsxs("button",{type:"button",className:"absolute p-1 rounded-md bottom-[2.5px] md:bottom-[5px] md:p-2 md:right-12 hover:text-black dark:hover:text-white hover:opacity-70 dark:disabled:hover:bg-transparent right-10 disabled:text-gray-300 dark:disabled:text-gray-400 text-gray-400 dark:text-gray-500 transition disabled:opacity-40 cursor-pointer",children:[e.jsx("span",{"data-state":"closed cursor-pointer",children:O}),e.jsx("input",{type:"file",accept:as[s],className:"h-full w-full absolute left-0 top-0 opacity-0 cursor-pointer",onChange:async x=>{const R=x.target.files?.[0];W(R),x.target.value=null}})]})),b?e.jsx("button",{type:"button",onClick:H,className:"absolute bottom-[12px] md:bottom-[18px] right-3 md:right-4 w-[20px] rounded-full border-2 border-gizmo-gray-950 p-1 dark:border-gray-200",children:e.jsx(As,{})}):e.jsx("button",{onClick:()=>{C(),q()},disabled:z,style:{backgroundColor:z?"":ie[s]},className:"absolute p-1 rounded-md bottom-[10px] md:bottom-3 md:p-2 md:right-3 dark:hover:bg-gray-900 dark:disabled:hover:bg-transparent right-2 disabled:text-gray-400 enabled:bg-brand-purple text-white transition-colors disabled:opacity-40",children:e.jsx("span",{"data-state":"closed",children:e.jsx(vs,{})})})]})})})},cr=({item:t})=>{const{question:s,questionImageUrl:r,questionImageRatio:n,questionFileUrl:a}=t,[{user:l}]=m("Account"),[{},{setImageViewData:i,setDocViewData:o}]=m("Modal");return e.jsx("div",{className:"group w-full text-gray-800 dark:text-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"flex p-4 gap-4 text-base md:gap-6 md:max-w-2xl lg:max-w-xl xl:max-w-3xl md:py-6 lg:px-0 m-auto",children:[e.jsx("div",{className:"flex-shrink-0 flex flex-col relative items-end",children:e.jsx(Ot,{style:{width:30,height:30,cursor:"inherit"},shape:"circle",color:"indigo",className:"semi-always-light",alt:l?.email,src:l?.photo==="https://files.authing.co/authing-console/default-user-avatar.png"?"":l?.photo,children:(l?.email||"").slice(0,2)})}),e.jsx("div",{className:"relative flex w-[calc(100%-50px)] flex-col gap-1 mt-0.5 md:gap-3 lg:w-[calc(100%-115px)]",children:e.jsx("div",{className:"flex flex-grow flex-col gap-3",children:e.jsxs("div",{className:"text-gray-900 dark:text-gray-100 min-h-[20px] flex flex-col items-start gap-4 whitespace-pre-wrap break-words",children:[r&&e.jsx(e.Fragment,{children:e.jsx("img",{className:"question-image hidden md:block shadow-lg",src:r,style:{...n?{aspectRatio:n}:{},...n>1&&n<=1.6?{height:200}:{},...n>1.6?{height:100}:{}},alt:"",onClick:()=>{a?o({url:a,pageRatio:n}):i({url:r,text:""})}})}),e.jsx("p",{className:"break-words whitespace-pre-wrap w-full",children:s})]})})})]})})},dr=({text:t="",status:s,isLast:r=!1,onRegenerate:n})=>{const[{modelType:a,md:l}]=m("Session"),i=l.render(t);return e.jsx("div",{className:"group w-full text-gray-800 dark:text-gray-100",children:e.jsxs("div",{className:"flex p-4 gap-4 text-base md:gap-6 md:max-w-2xl lg:max-w-xl xl:max-w-3xl md:py-6 lg:px-0 m-auto",children:[e.jsx("div",{className:"flex-shrink-0 flex flex-col relative items-end",children:e.jsx(xr,{})}),e.jsxs("div",{className:"relative flex w-[calc(100%-50px)] flex-col gap-1 mt-0.3 md:gap-3 lg:w-[calc(100%-115px)] group",children:[e.jsxs("div",{className:"flex flex-grow flex-col gap-3",children:[!!s.searchingText&&e.jsx("div",{className:"min-h-[20px] flex flex-col items-start gap-4 mt-1 break-words text-sm text-gray-500",children:e.jsxs("div",{className:"markdown w-full break-words dark:prose-invert dark",children:[s.searchingText,"..."]})}),!!s.fetchingUrl&&e.jsx("div",{className:"min-h-[20px] flex flex-col items-start gap-4 mt-1 break-words text-sm text-gray-500",children:e.jsx("div",{className:"markdown w-full break-words dark:prose-invert dark",dangerouslySetInnerHTML:{__html:l.render(s.fetchingUrl)}})}),!!s.imageGeneratingText&&e.jsxs("div",{className:"min-h-[20px] flex flex-col items-start gap-4 mt-1 break-words text-sm text-gray-500",children:[e.jsx("div",{className:"markdown w-full break-words dark:prose-invert dark",dangerouslySetInnerHTML:{__html:l.render(s.imageGeneratingText)}}),e.jsx("div",{className:"gem-image-placeholder"})]}),e.jsxs("div",{className:"min-h-[20px] flex flex-col items-start gap-4 break-words",children:[!!t&&e.jsx("div",{className:`markdown prose w-full break-words dark:prose-invert dark ${s.streaming?"result-streaming":""}`,dangerouslySetInnerHTML:{__html:i},style:{"--prompt-textarea-bg":ie[a]}}),!t&&!s.done&&!s.imageGeneratingText&&e.jsx("div",{className:"mt-2",children:e.jsx(pt,{size:"small"})}),!t&&s.done&&r&&e.jsx("button",{type:"button",className:"hover:bg-inherit btn mt-0.5 relative border-none py-1 px-2 font-semibold text-gray-800 bg-gray-100 hover:bg-gray-300",onClick:()=>{n()},children:e.jsx("span",{className:"text-xs",children:"重新生成"})})]})]}),s.done&&e.jsxs("div",{className:"flex justify-start gap-3 opacity-0 group-hover:opacity-100 transition duration-500",children:[e.jsx(Ps,{className:"hover:text-gray-600 dark:hover:text-white cursor-pointer transition duration-500",handleCopy:()=>{navigator.clipboard.writeText(t),M.success("已复制到剪切板")}}),r&&e.jsx(Ts,{className:"hover:text-gray-600 dark:hover:text-white cursor-pointer transition duration-500",onClick:n})]})]})]})})},hr=({history:t,onRegenerate:s})=>{const[{modelType:r}]=m("Session");return e.jsxs("div",{className:"magic-in relative",id:"message-list-container",children:[e.jsx("div",{className:"flex items-center justify-center gap-1 rounded-xl py-2 px-3 mt-3 text-sm font-medium text-gray-500",children:e.jsx("div",{children:lt[r]})}),t.map((n,a)=>{const{answer:l,status:i}=n;return e.jsxs("div",{children:[e.jsx(cr,{item:n}),e.jsx(dr,{text:l,status:i,isLast:a===t.length-1,onRegenerate:s})]},a)}),e.jsx("div",{className:"relative h-[150px] flex-shrink-0",id:"scrollable-message-buffer"})]})},xr=()=>{const[{modelType:t}]=m("Session");return e.jsx(is,{modelType:t})},mr=60;let pe="",fe="";const Je=()=>{const t=document.getElementById("scrollable-message-buffer");return t?t?.getBoundingClientRect().bottom-window.innerHeight<mr:!1};let Ee=new AbortController;const ft=()=>{const t=new URLSearchParams(window.location.search),{sessionId:s}=Re(),[{isPlus:r},{refreshProfile:n}]=m("Account"),[{sessionId:a,modelType:l,sessions:i},{refresh:o,setSessionId:d,refreshModelType:c}]=m("Session"),[{},{setUpgradeModalOpen:u,setWxkfQRCodeModalOpen:p,setImageViewData:j,setDocViewData:C}]=m("Modal"),[b,v]=g.useState([]),[H,re]=g.useState(""),[z,O]=g.useState(""),[q,W]=g.useState([]),[x,R]=g.useState(!1),[F,k]=g.useState(!1),[B,K]=g.useState(!0),[G,L]=g.useState(!1),ae=ce(),de=Ge(b),he=Ge(a),J=t.get("pay_status"),X=()=>{const h=document.getElementById("scrollable-message");h&&(h.scrollTop=0)},ee=()=>{const h=document.getElementById("scrollable-message");h&&(h.scrollTop=h.scrollHeight)},xe=()=>{const h=document.getElementById("scrollable-message");h&&h.scrollTo({top:h.scrollHeight,behavior:"smooth"})};g.useEffect(()=>{J==="success"&&(M.success("支付成功，您已升级 Plus 会员"),ae(""))},[]);const ke=h=>{v([]),h&&(K(!1),D("/session/list-messages",{sessionId:h}).then(N=>{const A=N?.data?.messages,S=[];A.forEach(_=>{_.role==="user"?S.push({question:_.content,questionImageUrl:_?.imageUrl,questionImageRatio:_?.imageRatio,questionFileUrl:_?.fileUrl,answer:"",status:{searchingText:"",fetchingUrl:"",streaming:!1,imageGeneratingText:"",done:!0}}):S[S.length-1]?S[S.length-1].answer=_.content:S.push({question:"",answer:_.content,status:{searchingText:"",fetchingUrl:"",streaming:!1,imageGeneratingText:"",done:!0}}),_?.fileHash&&O(_?.fileHash)}),v(S),K(!0)}))};g.useEffect(()=>{pe!==s&&(pe=s,d(s),c(s),ke(s),k(!1))},[s]),g.useEffect(()=>{W([]),a||(v([]),pe=""),L(!1)},[a]),g.useEffect(()=>{he!==a&&he&&O("")},[he,a]);const T=()=>{const h=document.getElementById("scrollable-message-buffer");!Je()&&h?L(!0):L(!1)},me=()=>{ee()},ue=Qe(T,10),Fe=g.useCallback(Qe(me,50),[]);g.useEffect(()=>{const h=document.getElementById("scrollable-message");if(h)return h.addEventListener("scroll",ue),h.addEventListener("click",N=>{if(N.target.closest(".copy-mark")){const S=N.target?.parentNode?.parentNode?.querySelectorAll(".shiki")?.[0]?.innerText;navigator.clipboard.writeText(S),M.success("已复制到剪切板")}if(N.target.closest(".gen-image-container img")){const A=N.target,S=A.src||"",_=+A.getAttribute("data-text")||"",se=+A.getAttribute("data-prompt")||"",ne=+A.getAttribute("data-width")||1024,Z=+A.getAttribute("data-width")||1024;j({url:S,text:_,prompt:se,width:ne,height:Z})}}),()=>{h.removeEventListener("scroll",ue)}},[]),g.useEffect(()=>{Je()&&Fe()},[b]),g.useEffect(()=>{(de?.length===0||b?.length===0)&&ee(),b?.length&&!b?.[b.length-1]?.answer&&ee(),a||X()},[de,b]);const te=async(h="",N=!1)=>{let A=h||H.trim(),S=q?.[0]?.fileUrl||"",_=q?.[0]?.hash||"",se=q?.[0]?.url||"",ne=q?.[0]?.ratio||1;I.track("SendChatRequest",{newMessage:A,modelType:l,sessionId:a});let Z=a;if(k(!0),re(""),W([]),ee(),a){if(ot[l]&&!r){u(!0),k(!1),I.track("OpenUpgradeModal",{from:"SessionChat"});return}}else{const E=await D("/session/add",{text:A,modelType:l});Z=E?.session?.id,pe=E?.session?.id,d(E?.session?.id),await o()}const Be={question:A,questionImageUrl:se,questionFileUrl:S,questionImageRatio:ne,questionFileHash:z,answer:"",status:{searchingText:"",fetchingUrl:"",streaming:!0,imageGeneratingText:"",done:!1}};if(N){v($=>{const U=$[$.length-1];return U&&($[$.length-1]={...U,answer:"",status:{searchingText:"",fetchingUrl:"",streaming:!0,imageGeneratingText:"",done:!1}}),[...$]});const E=b[b.length-1];A=E?.question,se=E?.questionImageUrl||"",ne=E?.questionImageRatio||1}else v(E=>[...E,Be]);N||D("/session/add-message",{sessionId:Z,content:A,imageUrl:se,imageRatio:ne,fileUrl:S,fileHash:_,role:"user"}),fe=Z;try{const $=(await fetch(`${nt}${ls[l]}`,{method:"POST",cache:"no-cache",keepalive:!0,mode:"cors",headers:{"Content-Type":"application/json",Accept:"text/event-stream",Authorization:`Bearer ${localStorage.getItem("_authing_token")||""}`},body:JSON.stringify({text:A,imageUrl:se,fileHash:z,history:b.slice(0,N?b.length-1:b.length).map(le=>[le.question,le.answer,{qustionImageUrl:le.questionImageUrl||""}])})}))?.body?.getReader();let U=!0,ge="";Ee=new AbortController;const vt=Ee.signal;for(;U&&!vt.aborted;){const{value:le,done:kt}=await $?.read()||{};if(!fe)break;if(kt){U=!1,k(!1),fe="",N?D("/session/modify-last-message",{sessionId:Z,content:ge,role:"assistant"}):D("/session/add-message",{sessionId:Z,content:ge,role:"assistant"}),v(f=>{const y=f[f.length-1];return y&&(y.status.streaming=!1,y.status.imageGeneratingText="",y.status.done=!0,f[f.length-1]=y),[...f]});break}let V=new TextDecoder().decode(le);if(V==='{"code":1001,"msg":"User not in membership"}'){V="会员已到期",await n(),u(!0),k(!1),v(f=>{const y=f[f.length-1];return y&&(y.status.done=!0,y.status.streaming=!1,y.status.imageGeneratingText="",f[f.length-1]=y),[...f]}),I.track("OpenUpgradeModal",{from:"SessionChat"}),I.track("SessionExpired",{from:"SessionChatDetail"});break}/^\[Searching\]/.test(V)?v(f=>{const y=f[f.length-1];return y&&(y.status.searchingText=V.replace("[Searching]",""),y.status.streaming=!1,f[f.length-1]=y),[...f]}):/^\[Fetching\]/.test(V)?v(f=>{const y=f[f.length-1];return y&&(y.status.searchingText="",y.status.fetchingUrl=V.replace("[Fetching]",""),y.status.streaming=!1,f[f.length-1]=y),[...f]}):/^\[ImageGenerating\]/.test(V)?v(f=>{const y=f[f.length-1];return y&&(y.status.imageGeneratingText=V.replace("[ImageGenerating]",""),y.status.streaming=!1,f[f.length-1]=y),setTimeout(()=>{xe()},100),[...f]}):(ge+=V,v(f=>{const y=f[f.length-1];return y&&(y.status.streaming=!0,y.status.searchingText="",y.status.imageGeneratingText="",y.status.fetchingUrl="",y.answer=ge,f[f.length-1]=y),[...f]}))}}catch(E){console.error("error",E),k(!1),v($=>{const U=$[$.length-1];return U&&(U.status.done=!0,U.status.streaming=!1,U.status.imageGeneratingText="",$[$.length-1]=U),[...$]})}},bt=()=>{Ee.abort(),v(h=>{const N=h[h.length-1];return N&&(N.status.streaming=!1,N.status.imageGeneratingText="",N.status.done=!0,h[h.length-1]=N,D("/session/update-last-answer",{sessionId:a,content:N.answer,role:"assistant"})),[...h]}),k(!1),fe=""},wt=()=>{const h=b[b.length-1];te(h.question,!0)},jt=()=>{};return e.jsxs("div",{id:"chat",className:"relative flex h-full max-w-full flex-1 overflow-hidden",children:[e.jsx("div",{className:"flex h-full max-w-full flex-1 flex-col",children:e.jsxs("main",{className:"relative h-full w-full transition-width flex flex-col overflow-hidden items-stretch flex-1",children:[e.jsx("div",{className:"absolute z-10 hidden flex-col gap-2 md:flex right-3 top-3"}),e.jsxs("div",{className:"flex-1 w-full overflow-hidden items-center justify-center bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"scrollable",id:"scrollable-message",children:[e.jsxs("div",{className:"relative flex flex-col text-sm bg-white dark:bg-gray-800",children:[!a&&e.jsx(ar,{onClickPrompt:h=>{re(h)}}),a&&b.length>0&&e.jsx(hr,{history:b,onRegenerate:wt})]}),!!a&&!F&&B&&b.length===0&&e.jsxs("div",{className:"flex flex-col flex-1 h-full items-center justify-center gap-1 py-2 px-3 font-medium text-gray-400 dark:text-gray-500",children:[e.jsx("div",{className:"text-lg text-center font-semibold mb-0 text-gray-900 dark:text-gray-100",children:"当前对话不存在"}),e.jsx("div",{className:"text-sm text-center font-semibold mb-5 text-gray-400 dark:text-gray-500",children:"对话无法找到或已被删除"}),e.jsx("button",{type:"button",className:"hover:bg-inherit btn relative border-none py-3 px-10 font-semibold text-gray-200 dark:text-gray-800 bg-gray-900 dark:bg-gray-100 hover:bg-gray-700 dark:hover:bg-gray-300",onClick:()=>{ae("/"),o()},children:"开启新对话"})]}),G&&e.jsx("button",{type:"button",onClick:xe,className:"absolute cursor-pointer bottom-[130px] translate-x-1/2 right-1/2 z-5 rounded-full bg-clip-padding border text-gray-800  dark:border-white/10 dark:bg-white/10 dark:text-gray-200 border-black/10 bg-white",children:e.jsx(Ss,{})})]}),e.jsx("div",{className:`h-full w-full absolute left-0 top-0 loading-scene ${B?"loaded":""}`,children:e.jsx(Oe,{})})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 w-full border-t md:border-t-0 dark:border-white/10 md:border-transparent md:dark:border-transparent bg-white dark:bg-gray-800 pt-2",children:[q.length>0&&e.jsx("div",{className:"mx-2 px-4 py-2 flex flex-row justify-start gap-3 last:mb-2 md:mx-4 md:last:mb-6 lg:mx-auto lg:max-w-2xl xl:max-w-3xl",children:q.map(h=>e.jsxs("div",{className:"relative attachment-file",children:[e.jsx("img",{className:"relative max-h-20",src:h.url,onClick:()=>{h.fileUrl?C({url:h.fileUrl,pageRatio:h.ratio}):j({url:h.url,text:""})}}),h.uploadPercent<100&&e.jsx("div",{className:"absolute left-0 top-0 h-[60px] w-[60px] flex justify-center items-center",style:{background:"rgba(0, 0, 0, 0.7)"},children:e.jsx(He,{stroke:"white",size:"small",percent:h.uploadPercent,type:"circle"})}),h.uploadPercent===100&&x&&e.jsx("div",{className:"absolute left-0 top-0 h-[60px] w-[60px] flex justify-center items-center",style:{background:"rgba(0, 0, 0, 0.7)"},children:e.jsx(He,{className:"animate-spin",stroke:"white",size:"small",percent:80,type:"circle"})}),e.jsx("div",{className:"absolute right-0 top-0 bg-gray-900 text-gray-500 opacity-50 transition hover:opacity-75 dark:text-white cursor-pointer scale-75",onClick:()=>{W([]),R(!1)},children:e.jsx(je,{})})]},h.url))}),e.jsx(ir,{message:H,filehash:z,attachments:q,attachmentLoading:x,setMessage:re,setAttachments:W,setAttachmentLoading:R,setFilehash:O,loading:F,fetched:B,onSubmit:te,onPause:bt,onFocus:jt}),e.jsx(nr,{})]})]})}),e.jsx("div",{className:"group fixed bottom-3 right-3 z-10 hidden gap-1 lg:flex",children:e.jsx("div",{className:"group relative","data-headlessui-state":"",children:e.jsx("button",{className:"flex items-center justify-center rounded-full border border-gray-200 bg-gray-50 text-gray-800 dark:border-white/10 dark:bg-white/10 dark:text-gray-200",type:"button","aria-haspopup":"true","aria-expanded":"false","data-headlessui-state":"",onClick:()=>{p(!0)},children:e.jsx("div",{className:"flex h-6 w-6 items-center justify-center text-xs",children:"?"})})})})]})},ur=({afterLogin:t})=>{const[{},{setWxkfQRCodeModalOpen:s}]=m("Modal"),r=async n=>{await D("/account/login",{token:n?.token}),t(),I.identify(n?.email),I.track("Login",{})};return e.jsxs("div",{className:"login w-full",children:[e.jsx("nav",{className:"py-4",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("a",{href:"/",className:"text-lg font-bold text-black hover:!text-primary dark:text-gray-200 dark:hover:!text-gray-100",children:"ChatAnything.AI"}),e.jsxs("div",{children:[e.jsx("a",{href:"/term",className:"font-bold text-black hover:!text-primary dark:text-gray-200 dark:hover:!text-gray-100 px-3 py-2",target:"_blank",children:"使用条款"}),e.jsx("a",{className:"font-bold text-black hover:!text-primary dark:text-gray-200 dark:hover:!text-gray-100 px-3 py-2",onClick:()=>{s(!0)},children:"联系我们"})]})]})})}),e.jsx("section",{className:"py-20 h-full",children:e.jsxs("div",{className:"container mx-auto px-4 flex items-center h-full",children:[e.jsx("div",{className:"flex-1 mr-70 lg:block hidden",children:e.jsxs("h1",{className:"text-6xl text-black dark:text-gray-100 font-normal mb-10 leading-snug",children:[e.jsx("div",{className:"slidein",children:"无需繁琐注册 \uD83E\uDD2F"}),e.jsx("div",{className:"slidein-1",children:"不被地域限制困扰 \uD83E\uDD14"}),e.jsx("div",{className:"slidein-2",children:"现在就体验前沿 AI 科技 \uD83E\uDD73"})]})}),e.jsx("div",{className:"lg:w-1/3 w-full bg-white rounded-lg shadow-lg  relative",style:{transform:"perspective(0)",transformOrigin:"50% 50% 0px"},children:e.jsx(Ft.Guard,{appId:rt,onLogin:r})})]})})]})};I.init("94a4b21ad5735db2b3cca0cd5e6465f0",{debug:!1,track_pageview:!0,persistence:"localStorage"});const gr=()=>{const[{user:t,profileFetched:s},{setUser:r,refreshProfile:n}]=m("Account"),[{announcementModalOpen:a},{setAnnouncementModalOpen:l}]=m("Modal"),[{md:i},{refresh:o,refreshModelType:d,refreshMd:c}]=m("Session"),u=g.useCallback(async()=>{const p=await be.getCurrentUser(),j=p?.token,{status:C}=await be.checkLoginStatus(j);n(),C&&(r(p),await o(),d(""),(!localStorage.getItem("chatanything-update-version")||localStorage.getItem("chatanything-update-version")!==Ue)&&(localStorage.setItem("chatanything-update-version",Ue),l(!0))),I.identify(p?.email)},[]);return g.useEffect(()=>{u()},[u]),g.useEffect(()=>{c()},[]),g.useEffect(()=>{localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.querySelector("html").classList.add("dark"),document.body.setAttribute("theme-mode","dark")):(document.querySelector("html").classList.remove("dark"),document.body.removeAttribute("theme-mode"))},[]),e.jsxs(e.Fragment,{children:[e.jsx(Bt,{}),e.jsx(er,{}),e.jsx("div",{className:"overflow-hidden w-full h-full relative flex z-0",children:s?t?.id?e.jsxs("div",{className:"overflow-hidden w-full h-full relative flex z-0 magic-in",children:[e.jsx(Rs,{}),!!i&&e.jsx(ft,{})]}):e.jsx(ur,{afterLogin:()=>{u()}}):e.jsx("div",{className:"overflow-hidden w-full h-full relative flex z-0",children:e.jsx(Oe,{})})})]})},pr=()=>e.jsx("div",{className:"bg-black min-h-screen flex flex-col items-center justify-center",children:e.jsxs("div",{className:"bg-white max-w-3xl p-8 rounded-lg shadow",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Privacy Policy for ChatAnything AI Chat App"}),e.jsx("p",{children:"We take your privacy very seriously at ChatAnything, and we are committed to protecting your personal information. This Privacy Policy explains how we collect, use, and safeguard your information when you use our AI chat app."}),e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Information We Collect:"}),e.jsx("p",{children:"When you sign up for our chat app, we collect your email address and other personal details that you voluntarily provide, such as your name, age, and location. We also collect information about your usage of our app, including your chat activity, search history, and device information."}),e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"How We Use Your Information:"}),e.jsx("p",{children:"We use the information we collect to provide you with personalized chat experiences, improve our app and services, and to communicate with you about updates, promotions, and other news related to our chat app."}),e.jsx("p",{children:"We do not sell or share your personal information with any third parties without your explicit consent, except as required by law."}),e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Data Security:"}),e.jsx("p",{children:"We take the security of your personal information seriously and have implemented appropriate measures to ensure the protection of your data and prevent unauthorized access or disclosure. We use industry-standard encryption to protect your information and regularly monitor our systems for potential vulnerabilities."}),e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Third-Party Links:"}),e.jsx("p",{children:"Our chat app may contain links to third-party websites or services that are not under our control. We are not responsible for the privacy policies or actions of these third-party sites and strongly encourage you to review their policies before sharing any personal information."}),e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Updates to This Privacy Policy:"}),e.jsx("p",{children:"We reserve the right to update this Privacy Policy at any time to reflect changes in our business practices and legal obligations. We will post any updates on our website and notify you by email or in-app notification."}),e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Contact Us:"}),e.jsx("p",{children:"If you have any questions or concerns about our Privacy Policy, or if you wish to access, update or delete your personal information, please contact us at help@chatanything.ai"})]})}),fr=()=>e.jsx("div",{className:"bg-black min-h-screen flex flex-col items-center justify-center",children:e.jsxs("div",{className:"bg-white max-w-3xl p-8 rounded-lg shadow",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Terms of Use for ChatAnything AI Chat App"}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Overview"}),e.jsx("p",{children:"By using ChatAnything, you agree to comply with these Terms of Use and all applicable laws. These terms govern your use of our app, including access to the services we offer."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Eligibility"}),e.jsx("p",{children:"You must be 18 years or older to use ChatAnything. If you are under 18 years of age, you must obtain your parent or guardian’s consent before using our app."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Registration"}),e.jsx("p",{children:"You will need to register with ChatAnything to use our app. You agree to provide accurate and complete information and to update your details if there are any changes. You are responsible for maintaining the confidentiality of your account and password and for restricting access to your computer and mobile devices."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"User Conduct"}),e.jsx("p",{children:"You agree to use ChatAnything for lawful purposes only and to comply with all applicable laws. You may not use our app to infringe on the rights of others, promote illegal activity, or share obscene, defamatory, or offensive content. You may not use bots or automated scripts to access our app."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Personal Information"}),e.jsx("p",{children:"We take the privacy of our users seriously. We collect and use your personal information in accordance with our Privacy Policy, which forms part of these Terms of Use. By using our app, you consent to our collection, use, and disclosure of your personal information as set out in our Privacy Policy."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Intellectual Property"}),e.jsx("p",{children:"The content, design, and layout of ChatAnything are the property of ChatAnything and are protected by copyright, trademark, and other intellectual property laws. You may not use, modify, reproduce, or distribute any part of our app without our consent."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Liability"}),e.jsx("p",{children:"We are not liable for any direct, indirect, or consequential damages arising out of your use or inability to use ChatAnything, including the loss of profits, goodwill, or data. We make no warranties or representations about the accuracy, completeness, or reliability of the content on our app."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Termination"}),e.jsx("p",{children:"We reserve the right to terminate your account and prohibit your use of ChatAnything if you breach these Terms of Use or violate any applicable laws."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Changes to Terms of Use"}),e.jsx("p",{children:"We reserve the right to modify these Terms of Use at any time without notice. Your continued use of ChatAnything constitutes your acceptance of any changes to the Terms of Use."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Applicable Law"}),e.jsx("p",{children:"These Terms of Use are governed by the laws of the state or country where ChatAnything is located, without regard to its conflict of laws provisions. Any dispute arising out of these Terms of Use will be resolved by binding arbitration in accordance with the rules of the American Arbitration Association."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mt-8 mb-8",children:"Contact Us:"}),e.jsx("p",{children:"If any provision of these Terms of Use is found to be invalid or unenforceable, the remaining provisions will remain in full force and effect. These Terms of Use constitute the entire agreement between you and ChatAnything with respect to your use of our app and supersede all prior or contemporaneous communications and proposals, whether oral or written, between you and ChatAnything. If you have any questions or concerns about these Terms of Use, please contact us at help@chatanything.ai."})]})]})}),yr=Gt([{path:"/",element:e.jsx(gr,{}),children:[{path:"c/:sessionId",element:e.jsx(ft,{})}]},{path:"/privacy",element:e.jsx(pr,{})},{path:"/term",element:e.jsx(fr,{})}]);Ht.createRoot(document.getElementById("root")).render(e.jsx(zt,{router:yr}))});var_f1342fdd_1200_5a08_82b0_ac9c4cb1d69f=br()});export{var_f1342fdd_1200_5a08_82b0_ac9c4cb1d69f as default,__tla};